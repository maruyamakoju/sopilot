<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>SOPilot â€” AIé§†å‹• SOPéµå®ˆè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ </title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#060c18;--surface:#0f172a;--surface2:#1e293b;--surface3:#263348;
  --border:rgba(255,255,255,0.07);--border2:rgba(255,255,255,0.12);
  --accent:#0d9488;--accent-b:#14b8a6;--accent-glow:rgba(13,148,136,0.25);
  --pass:#10b981;--warn:#f59e0b;--danger:#ef4444;--review:#3b82f6;
  --text:#f1f5f9;--muted:#94a3b8;--ink:#cbd5e1;
  --r:14px;--r-sm:10px;
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);
  font-family:"Segoe UI","Hiragino Sans","Yu Gothic UI","Noto Sans JP",sans-serif;
  line-height:1.6;overflow-x:hidden}

/* â”€â”€ NAV â”€â”€ */
nav{position:fixed;top:0;left:0;right:0;z-index:200;
  background:rgba(6,12,24,0.88);backdrop-filter:blur(24px);
  border-bottom:1px solid var(--border);
  padding:0 48px;height:62px;display:flex;align-items:center;justify-content:space-between}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text)}
.logo-icon{width:34px;height:34px;border-radius:9px;
  background:linear-gradient(135deg,#0d9488,#14b8a6);
  display:flex;align-items:center;justify-content:center;
  font-weight:900;font-size:17px;color:#fff;letter-spacing:-1px}
.logo-name{font-size:1.15rem;font-weight:800;letter-spacing:-0.02em}
.logo-badge{font-size:11px;padding:2px 9px;border-radius:999px;
  background:rgba(13,148,136,0.18);border:1px solid rgba(13,148,136,0.45);
  color:var(--accent-b);font-weight:700}
.nav-links{display:flex;gap:28px;list-style:none}
.nav-links a{color:var(--muted);text-decoration:none;font-size:13px;font-weight:500;transition:color .18s}
.nav-links a:hover{color:var(--text)}
.nav-cta{display:flex;align-items:center;gap:8px}

/* â”€â”€ UTIL â”€â”€ */
.btn{display:inline-flex;align-items:center;gap:7px;padding:10px 22px;
  border-radius:9px;font:inherit;font-weight:600;font-size:14px;
  cursor:pointer;transition:all .18s;border:none}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover{background:var(--accent-b);box-shadow:0 6px 20px rgba(13,148,136,0.4)}
.btn-ghost{background:transparent;border:1px solid var(--border2);color:var(--text)}
.btn-ghost:hover{border-color:var(--accent-b);color:var(--accent-b)}

.pill{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;
  border-radius:999px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.05em}
.pill-pass{background:rgba(16,185,129,.15);color:#10b981;border:1px solid rgba(16,185,129,.3)}
.pill-review{background:rgba(59,130,246,.15);color:#3b82f6;border:1px solid rgba(59,130,246,.3)}
.pill-fail{background:rgba(239,68,68,.15);color:#ef4444;border:1px solid rgba(239,68,68,.3)}
.pill-efficiency{background:rgba(59,130,246,.12);color:#60a5fa;border:1px solid rgba(59,130,246,.25)}
.pill-critical{background:rgba(239,68,68,.12);color:#f87171;border:1px solid rgba(239,68,68,.25)}
.pill-quality{background:rgba(245,158,11,.12);color:#fbbf24;border:1px solid rgba(245,158,11,.25)}

.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:24px}
.card-hover{transition:border-color .2s,transform .2s,box-shadow .2s}
.card-hover:hover{border-color:rgba(13,148,136,.3);transform:translateY(-2px);box-shadow:0 12px 40px rgba(0,0,0,.35)}
.divider{height:1px;background:var(--border);margin:18px 0}
.text-accent{color:var(--accent-b)} .text-pass{color:#10b981}
.text-warn{color:#f59e0b} .text-danger{color:#ef4444}
.text-muted{color:var(--muted)}

/* â”€â”€ GRID â”€â”€ */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}

/* â”€â”€ SECTION â”€â”€ */
.section{padding:100px 48px 80px;max-width:1300px;margin:0 auto}
.sec-label{display:inline-flex;align-items:center;gap:8px;
  font-size:12px;font-weight:700;color:var(--accent-b);
  letter-spacing:.12em;text-transform:uppercase;margin-bottom:14px}
.sec-label::before{content:'';display:block;width:18px;height:2px;background:var(--accent-b);border-radius:2px}
.sec-title{font-size:clamp(1.6rem,3vw,2.4rem);font-weight:800;line-height:1.15;margin-bottom:14px}
.sec-sub{color:var(--muted);font-size:1.05rem;max-width:580px;line-height:1.7;margin-bottom:44px}

/* â”€â”€ HERO â”€â”€ */
#hero{min-height:100vh;display:flex;flex-direction:column;justify-content:center;
  position:relative;padding:80px 48px 80px;max-width:1300px;margin:0 auto}
.hero-bg{position:fixed;inset:0;z-index:-1;
  background:radial-gradient(ellipse 80% 60% at 50% -10%,rgba(13,148,136,.18) 0%,transparent 65%),
             radial-gradient(ellipse 50% 40% at 80% 80%,rgba(6,182,212,.08) 0%,transparent 60%),
             var(--bg)}
.hero-grid-bg{position:fixed;inset:0;z-index:-1;
  background-image:linear-gradient(rgba(13,148,136,.04) 1px,transparent 1px),
                   linear-gradient(90deg,rgba(13,148,136,.04) 1px,transparent 1px);
  background-size:48px 48px;
  mask-image:radial-gradient(ellipse 100% 80% at 50% 0%,black 0%,transparent 80%)}
.hero-eyebrow{display:inline-flex;align-items:center;gap:8px;
  background:rgba(13,148,136,.12);border:1px solid rgba(13,148,136,.35);
  border-radius:999px;padding:6px 16px;font-size:13px;font-weight:600;
  color:var(--accent-b);margin-bottom:24px;width:fit-content}
.live-dot{width:7px;height:7px;border-radius:50%;background:#10b981;
  animation:pulse 2s infinite;flex-shrink:0}
@keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(16,185,129,.4)}
  50%{opacity:.7;box-shadow:0 0 0 6px rgba(16,185,129,0)}}
.hero-title{font-size:clamp(2.4rem,5.5vw,4rem);font-weight:900;line-height:1.08;
  letter-spacing:-.02em;margin-bottom:22px;
  background:linear-gradient(160deg,#f1f5f9 0%,#94a3b8 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-title em{font-style:normal;
  background:linear-gradient(135deg,#14b8a6,#06b6d4);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-sub{font-size:1.2rem;color:var(--muted);max-width:580px;line-height:1.75;margin-bottom:44px}
.hero-cta{display:flex;gap:12px;margin-bottom:60px;flex-wrap:wrap}
.hero-metrics{display:grid;grid-template-columns:repeat(3,1fr);
  background:rgba(255,255,255,.025);
  border:1px solid var(--border2);border-radius:var(--r);overflow:hidden;width:fit-content}
.hm{padding:22px 36px;border-right:1px solid var(--border);text-align:center}
.hm:last-child{border-right:none}
.hm-val{font-size:2.2rem;font-weight:900;color:var(--accent-b);line-height:1;margin-bottom:3px}
.hm-label{font-size:11px;color:var(--muted);font-weight:600;text-transform:uppercase;letter-spacing:.07em}
.hero-scroll{position:absolute;bottom:36px;left:50%;transform:translateX(-50%);
  display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--muted);font-size:12px}
.hero-scroll-arrow{width:24px;height:24px;border-right:2px solid var(--muted);
  border-bottom:2px solid var(--muted);transform:rotate(45deg);
  animation:bounce 1.5s infinite}
@keyframes bounce{0%,100%{transform:rotate(45deg) translateY(0)}
  50%{transform:rotate(45deg) translateY(4px)}}

/* â”€â”€ FLOW â”€â”€ */
.flow{display:flex;align-items:stretch;gap:0}
.flow-step{flex:1;padding:28px 22px;background:var(--surface);
  border:1px solid var(--border);border-radius:var(--r);text-align:center;
  transition:border-color .2s}
.flow-step:hover{border-color:rgba(13,148,136,.35)}
.flow-arrow{display:flex;align-items:center;justify-content:center;
  padding:0 10px;color:var(--accent-b);font-size:20px;flex-shrink:0}
.flow-icon{width:52px;height:52px;border-radius:14px;
  background:rgba(13,148,136,.12);border:1px solid rgba(13,148,136,.25);
  display:flex;align-items:center;justify-content:center;
  font-size:26px;margin:0 auto 14px}
.flow-title{font-size:15px;font-weight:700;margin-bottom:6px}
.flow-desc{font-size:13px;color:var(--muted);line-height:1.6}

/* â”€â”€ STAT â”€â”€ */
.stat{background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r);padding:20px 22px;transition:border-color .2s,transform .2s}
.stat:hover{border-color:rgba(13,148,136,.3);transform:translateY(-2px)}
.stat-label{font-size:11px;font-weight:700;color:var(--muted);
  text-transform:uppercase;letter-spacing:.08em;margin-bottom:8px}
.stat-val{font-size:2rem;font-weight:900;line-height:1;margin-bottom:3px}
.stat-sub{font-size:12px;color:var(--muted)}

/* â”€â”€ TABLE â”€â”€ */
table{width:100%;border-collapse:collapse;font-size:13px}
thead th{padding:10px 14px;text-align:left;font-size:11px;font-weight:700;
  color:var(--muted);text-transform:uppercase;letter-spacing:.07em;
  border-bottom:1px solid var(--border)}
tbody td{padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.04);vertical-align:middle}
tbody tr:last-child td{border-bottom:none}
tbody tr{cursor:pointer;transition:background .15s}
tbody tr:hover td{background:rgba(13,148,136,.06)}
tbody tr.row-active td{background:rgba(13,148,136,.1);border-bottom-color:rgba(13,148,136,.15)}

/* â”€â”€ PROGRESS â”€â”€ */
.prog-wrap{background:rgba(255,255,255,.06);border-radius:999px;height:7px;overflow:hidden}
.prog-fill{height:100%;border-radius:999px;transition:width 1s cubic-bezier(.4,0,.2,1)}

/* â”€â”€ SCORE RING â”€â”€ */
.ring-wrap{position:relative;width:130px;height:130px;margin:0 auto}
.ring-svg{width:100%;height:100%;transform:rotate(-90deg)}
.ring-bg{fill:none;stroke:rgba(255,255,255,.06);stroke-width:9}
.ring-fill{fill:none;stroke-width:9;stroke-linecap:round;
  transition:stroke-dashoffset 1.1s cubic-bezier(.4,0,.2,1)}
.ring-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.ring-number{font-size:1.7rem;font-weight:900;line-height:1}
.ring-lbl{font-size:10px;color:var(--muted);font-weight:700;text-transform:uppercase;letter-spacing:.07em}

/* â”€â”€ SCENARIO BTN â”€â”€ */
.scen-btn{width:100%;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-sm);padding:12px 14px;cursor:pointer;
  text-align:left;color:var(--text);font:inherit;transition:all .18s}
.scen-btn:hover{border-color:rgba(13,148,136,.35);background:rgba(13,148,136,.05)}
.scen-btn.active{border-color:var(--accent);background:rgba(13,148,136,.1)}
.scen-name{font-size:13px;font-weight:700;margin-bottom:3px}
.scen-score{font-size:1.4rem;font-weight:900}

/* â”€â”€ SCANNING OVERLAY â”€â”€ */
.scanning{display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:320px;gap:16px}
.scan-bar-wrap{width:280px;height:4px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.scan-bar-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-b));
  border-radius:999px;transition:width .05s linear}
.scan-label{font-size:14px;color:var(--muted);font-weight:600}
.scan-sublabel{font-size:12px;color:var(--surface3)}

/* â”€â”€ ARCH â”€â”€ */
.arch-item{background:var(--surface2);border:1px solid var(--border);
  border-radius:var(--r-sm);padding:14px 16px;margin-bottom:8px}
.arch-item-title{font-size:11px;font-weight:800;color:var(--accent-b);
  text-transform:uppercase;letter-spacing:.09em;margin-bottom:4px}
.arch-item-body{font-size:12px;color:var(--muted);line-height:1.5}

/* â”€â”€ TIMELINE â”€â”€ */
.tl-wrap{position:relative;height:36px;background:rgba(255,255,255,.04);
  border-radius:8px;overflow:hidden}
.tl-gold{position:absolute;top:0;left:0;height:100%;
  background:linear-gradient(90deg,rgba(13,148,136,.7),rgba(20,184,166,.5));
  border-radius:8px;transition:width .8s cubic-bezier(.4,0,.2,1)}
.tl-dev{position:absolute;top:0;height:100%;
  background:rgba(59,130,246,.3);border-left:2px solid #3b82f6;border-right:2px solid #3b82f6}
.tl-label{font-size:11px;color:var(--muted);margin-bottom:5px}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideRight{from{opacity:0;transform:translateX(-16px)}to{opacity:1;transform:translateX(0)}}
.anim{opacity:0;animation:fadeInUp .55s cubic-bezier(.4,0,.2,1) both}
.d1{animation-delay:.08s}.d2{animation-delay:.16s}.d3{animation-delay:.24s}
.d4{animation-delay:.32s}.d5{animation-delay:.40s}.d6{animation-delay:.48s}

/* â”€â”€ CRITICAL ALERT PULSE â”€â”€ */
@keyframes criticalPulse{
  0%,100%{box-shadow:0 0 0 0 rgba(239,68,68,0)}
  50%{box-shadow:0 0 0 4px rgba(239,68,68,0.18)}}
.scen-btn[data-fail="1"]{animation:criticalPulse 2.5s ease-in-out infinite}

/* â”€â”€ FOOTER â”€â”€ */
footer{padding:40px 48px;border-top:1px solid var(--border);text-align:center;
  color:var(--muted);font-size:13px}

@media(max-width:900px){
  .section,.section{padding:80px 20px 60px}
  nav{padding:0 20px}.nav-links,.nav-cta{display:none}
  .g2,.g3,.g4{grid-template-columns:1fr}
  .flow{flex-direction:column}.hero-metrics{grid-template-columns:1fr}
  #hero{padding:80px 20px 60px}
}

/* â•â• LIVE SCORING WIDGET â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.live-api-status{
  display:inline-flex;align-items:center;gap:8px;
  padding:7px 16px;border-radius:99px;font-size:13px;font-weight:600;
  border:1px solid var(--border2);background:var(--surface2);
  transition:all .3s;
}
.api-dot{width:9px;height:9px;border-radius:50%;background:var(--muted);flex-shrink:0;transition:background .3s}
.api-dot.online{background:#10b981;box-shadow:0 0 6px rgba(16,185,129,.6);animation:apiBlink 2s ease-in-out infinite}
.api-dot.offline{background:#ef4444}
@keyframes apiBlink{0%,100%{opacity:1}50%{opacity:.5}}

.live-steps{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:20px}
@media(max-width:640px){.live-steps{grid-template-columns:1fr}}

.live-step-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r);
  padding:24px;display:flex;flex-direction:column;gap:14px;
  transition:border-color .2s;
}
.live-step-card.active{border-color:rgba(13,148,136,.4)}
.live-step-label{font-size:11px;font-weight:800;text-transform:uppercase;letter-spacing:.1em;color:var(--accent);margin-bottom:2px}
.live-step-card h4{font-size:15px;font-weight:700}

.gold-select{
  width:100%;padding:11px 14px;
  background:var(--surface2);border:1px solid var(--border2);border-radius:9px;
  color:var(--text);font:inherit;font-size:14px;
  outline:none;cursor:pointer;transition:border-color .2s;
}
.gold-select:focus{border-color:var(--accent)}
.gold-select option{background:var(--surface2)}

.drop-zone{
  border:2px dashed var(--border2);border-radius:12px;
  padding:32px 20px;text-align:center;cursor:pointer;
  transition:all .2s;position:relative;
}
.drop-zone:hover,.drop-zone.over{border-color:var(--accent);background:rgba(13,148,136,.04)}
.drop-zone.has-file{border-color:var(--accent);background:rgba(13,148,136,.06);border-style:solid}
.drop-zone input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.drop-icon{font-size:32px;margin-bottom:10px}
.drop-label{font-size:14px;font-weight:600;color:var(--text)}
.drop-sub{font-size:12px;color:var(--muted);margin-top:4px}
.drop-file-name{font-size:13px;font-weight:700;color:var(--accent-b);margin-top:6px;word-break:break-all}

.live-score-btn{
  width:100%;padding:14px;border:none;border-radius:10px;
  background:linear-gradient(135deg,#0d9488,#14b8a6);
  color:#fff;font:inherit;font-size:16px;font-weight:700;
  cursor:pointer;transition:opacity .2s,transform .15s;
  display:flex;align-items:center;justify-content:center;gap:8px;
  margin-top:8px;
}
.live-score-btn:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}
.live-score-btn:disabled{opacity:.4;cursor:not-allowed;transform:none}

.live-progress{
  margin-top:20px;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r);padding:24px;display:none;
}
.live-progress.visible{display:block}
.prog-label{font-size:13px;color:var(--muted);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.prog-spinner{
  width:16px;height:16px;border:2px solid var(--border2);border-top-color:var(--accent);
  border-radius:50%;animation:spin .8s linear infinite;flex-shrink:0;
}
@keyframes spin{to{transform:rotate(360deg)}}
.prog-bar-wrap{height:4px;background:var(--border2);border-radius:4px;overflow:hidden}
.prog-bar{height:100%;background:linear-gradient(90deg,#0d9488,#14b8a6);border-radius:4px;transition:width .4s;width:0%}

.live-result{
  margin-top:20px;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r);padding:28px;display:none;
}
.live-result.visible{display:block}
.live-result-header{display:flex;align-items:center;gap:16px;margin-bottom:20px;flex-wrap:wrap}
.live-score-big{font-size:52px;font-weight:900;line-height:1}
.live-result-meta{flex:1}
.live-result-meta h3{font-size:20px;font-weight:700;margin-bottom:6px}
.live-dev-list{display:flex;flex-direction:column;gap:10px;margin-top:16px}
.live-dev-item{
  background:var(--surface2);border:1px solid var(--border);border-radius:10px;
  padding:14px 16px;display:flex;gap:12px;align-items:flex-start;
}
.live-dev-step{font-size:11px;font-weight:700;color:var(--muted);min-width:48px}
.live-dev-body{flex:1}
.live-dev-type{font-size:13px;font-weight:600;color:var(--text)}
.live-dev-detail{font-size:12px;color:var(--muted);margin-top:2px}
.live-retry-btn{
  margin-top:16px;padding:9px 20px;border-radius:8px;border:1px solid var(--border2);
  background:transparent;color:var(--muted);font:inherit;font-size:13px;cursor:pointer;
  transition:color .2s,border-color .2s;
}
.live-retry-btn:hover{color:var(--text);border-color:var(--accent-b)}

.live-offline-msg{
  text-align:center;padding:40px 24px;
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r);
  margin-top:20px;
}
.live-offline-code{
  display:inline-block;margin-top:12px;padding:10px 20px;
  background:var(--surface2);border:1px solid var(--border2);border-radius:8px;
  font-family:monospace;font-size:13px;color:var(--accent-b);
}
.live-stats-bar{
  display:none;gap:0;background:rgba(13,148,136,.06);
  border:1px solid rgba(13,148,136,.18);border-radius:var(--r);
  padding:14px 24px;margin-top:14px;
}
.live-stats-bar.visible{display:flex}
.live-stat-item{flex:1;text-align:center;padding:4px 0;border-right:1px solid var(--border)}
.live-stat-item:last-child{border-right:none}
.live-stat-num{font-size:1.5rem;font-weight:900;color:var(--accent-b);line-height:1}
.live-stat-lbl{font-size:10px;color:var(--muted);font-weight:700;text-transform:uppercase;
  letter-spacing:.07em;margin-top:3px}
.btn-csv{
  display:inline-flex;align-items:center;gap:6px;padding:9px 20px;
  border-radius:8px;border:1px solid rgba(13,148,136,.35);
  background:rgba(13,148,136,.07);color:var(--accent-b);font:inherit;font-size:13px;
  cursor:pointer;transition:all .2s;
}
.btn-csv:hover{background:rgba(13,148,136,.15);border-color:var(--accent-b)}
</style>
</head>
<body>

<div class="hero-bg"></div>
<div class="hero-grid-bg"></div>

<!-- NAV -->
<nav>
  <a href="#hero" class="logo">
    <div class="logo-icon">SP</div>
    <span class="logo-name">SOPilot</span>
    <span class="logo-badge">PoC v0.2</span>
  </a>
  <ul class="nav-links">
    <li><a href="#how">ä»•çµ„ã¿</a></li>
    <li><a href="#results">è©•ä¾¡çµæœ</a></li>
    <li><a href="#validation" style="color:#10b981;font-weight:700">96æ™‚é–“æ¤œè¨¼</a></li>
    <li><a href="#explorer">ã‚·ãƒŠãƒªã‚ªè©³ç´°</a></li>
    <li><a href="#arch">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a></li>
    <li><a href="#live" style="color:var(--accent-b);font-weight:700">â–¶ ãƒ©ã‚¤ãƒ–æ¡ç‚¹</a></li>
    <li><a href="#impact">å°å…¥åŠ¹æœ</a></li>
  </ul>
  <div class="nav-cta">
    <a href="proposal.html#contact" class="btn btn-primary" style="padding:8px 18px;font-size:13px;text-decoration:none">ãƒ‡ãƒ¢ç”³è¾¼</a>
  </div>
</nav>

<!-- â•â•â• HERO â•â•â• -->
<section id="hero">
  <div class="hero-eyebrow anim">
    <span class="live-dot"></span>
    å®Œå…¨ã‚ªãƒ³ãƒ—ãƒ¬ç¨¼åƒä¸­ &nbsp;Â·&nbsp; å¤–éƒ¨æ¥ç¶šã‚¼ãƒ­ &nbsp;Â·&nbsp; PoCæ¤œè¨¼æ¸ˆã¿
  </div>
  <h1 class="hero-title anim d1">
    SOPéµå®ˆã‚’<br><em>å‹•ç”»AIã§</em><br>è‡ªå‹•æ¡ç‚¹
  </h1>
  <p class="hero-sub anim d2">
    ç ”ä¿®ç”Ÿã®ä½œæ¥­å‹•ç”»ã‚’ã‚´ãƒ¼ãƒ«ãƒ‰åŸºæº–ã¨å³æ™‚æ¯”è¼ƒã€‚<br>
    é€¸è„±ç®‡æ‰€ã‚’ã‚¹ãƒ†ãƒƒãƒ—å˜ä½ãƒ»ç§’å˜ä½ã§ç‰¹å®šã—ã€<br>
    è©•ä¾¡å·¥æ•°ã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã¾ã™ã€‚
  </p>
  <div class="hero-cta anim d3">
    <a href="proposal.html" class="btn btn-primary">ãƒ‡ãƒ¢ç’°å¢ƒã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</a>
    <a href="proposal.html#spec" class="btn btn-ghost">æŠ€è¡“ä»•æ§˜æ›¸ã‚’è¦‹ã‚‹</a>
  </div>
  <div class="hero-metrics anim d4">
    <div class="hm">
      <div class="hm-val" id="hm-jobs">â€”</div>
      <div class="hm-label">96æ™‚é–“ æ¡ç‚¹ã‚¸ãƒ§ãƒ–æ•°</div>
    </div>
    <div class="hm">
      <div class="hm-val" id="hm-miss" style="color:#10b981">â€”</div>
      <div class="hm-label">NGè¦‹é€ƒã—ç‡ï¼ˆé‡å¤§é€¸è„±ï¼‰</div>
    </div>
    <div class="hm">
      <div class="hm-val" id="hm-jitter" style="color:#10b981">â€”</div>
      <div class="hm-label">æ¡ç‚¹å†ç¾æ€§ã‚¸ãƒƒã‚¿ãƒ¼</div>
    </div>
  </div>
  <div class="hero-scroll">
    <div class="hero-scroll-arrow"></div>
    ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è©³ç´°ã¸
  </div>
</section>

<!-- â•â•â• HOW IT WORKS â•â•â• -->
<section class="section" id="how">
  <div class="sec-label">ä»•çµ„ã¿</div>
  <h2 class="sec-title">3ã‚¹ãƒ†ãƒƒãƒ—ã§è©•ä¾¡å®Œäº†</h2>
  <p class="sec-sub">å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã€‚AIãŒè‡ªå‹•çš„ã«SOPéµå®ˆçŠ¶æ³ã‚’æ•°å€¤åŒ–ã—ã¾ã™ã€‚</p>

  <div class="flow" style="gap:14px;margin-bottom:56px">
    <div class="flow-step">
      <div class="flow-icon">ğŸ¥</div>
      <div class="flow-title">â‘   å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</div>
      <div class="flow-desc">ã‚´ãƒ¼ãƒ«ãƒ‰å‹•ç”»ï¼ˆæ­£è§£æ‰‹é †ï¼‰ã¨ç ”ä¿®ç”Ÿå‹•ç”»ã‚’ã‚ªãƒ³ãƒ—ãƒ¬ã‚µãƒ¼ãƒã¸é€ä¿¡ã€‚å¤–éƒ¨ã«ã¯ä¸€åˆ‡å‡ºã¾ã›ã‚“ã€‚</div>
    </div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step">
      <div class="flow-icon">ğŸ§ </div>
      <div class="flow-title">â‘¡  AIè§£æãƒ»æ•´åˆ—</div>
      <div class="flow-desc">V-JEPA2æ˜ åƒã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã§ç‰¹å¾´é‡ã‚’æŠ½å‡ºã€‚DTWã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æ‰‹é †ã‚’æ™‚ç³»åˆ—æ•´åˆ—ã—ã¾ã™ã€‚</div>
    </div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-step">
      <div class="flow-icon">ğŸ“Š</div>
      <div class="flow-title">â‘¢  ã‚¹ã‚³ã‚¢ãƒ»é€¸è„±ãƒ¬ãƒãƒ¼ãƒˆ</div>
      <div class="flow-desc">åˆå¦åˆ¤å®šãƒ»é‡å¤§åº¦åˆ†é¡ãƒ»ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰ä»˜ãé€¸è„±ãƒªã‚¹ãƒˆã‚’å³æ™‚ç”Ÿæˆã€‚ç›£æŸ»ãƒ­ã‚°ã«ã‚‚å¯¾å¿œã€‚</div>
    </div>
  </div>

  <div class="g3">
    <div class="card card-hover">
      <div style="font-size:28px;margin-bottom:12px">ğŸ”’</div>
      <h3 style="margin-bottom:8px">å®Œå…¨ã‚ªãƒ³ãƒ—ãƒ¬</h3>
      <p style="color:var(--muted);font-size:13px;line-height:1.6">æ˜ åƒãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨ã«å‡ºã¾ã›ã‚“ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆéæ¥ç¶šã®ã‚¨ã‚¢ã‚®ãƒ£ãƒƒãƒ—ç’°å¢ƒã§ã‚‚å®Œå…¨ç¨¼åƒã—ã¾ã™ã€‚</p>
    </div>
    <div class="card card-hover">
      <div style="font-size:28px;margin-bottom:12px">âš¡</div>
      <h3 style="margin-bottom:8px">éåŒæœŸé«˜é€Ÿæ¡ç‚¹</h3>
      <p style="color:var(--muted);font-size:13px;line-height:1.6">æ¡ç‚¹ã‚¸ãƒ§ãƒ–ã¯ã‚­ãƒ¥ãƒ¼ã§éåŒæœŸå‡¦ç†ã€‚è¤‡æ•°å‹•ç”»ã‚’ä¸¦è¡Œæ¡ç‚¹ã€‚èµ·å‹•æ™‚ã«æœªå®Œã‚¸ãƒ§ãƒ–ã‚’è‡ªå‹•å†é–‹ã—ã¾ã™ã€‚</p>
    </div>
    <div class="card card-hover">
      <div style="font-size:28px;margin-bottom:12px">ğŸ“‹</div>
      <h3 style="margin-bottom:8px">ç›£æŸ»å¯¾å¿œãƒ¬ãƒãƒ¼ãƒˆ</h3>
      <p style="color:var(--muted);font-size:13px;line-height:1.6">JSONè‡ªå‹•å‡ºåŠ›ã§ç›£æŸ»è¨¼è·¡ã‚’ç”Ÿæˆã€‚è©•ä¾¡è€…ã‚³ãƒ¡ãƒ³ãƒˆãƒ»åˆ¤å®šå±¥æ­´ã‚‚DBã«æ°¸ç¶šä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
    </div>
  </div>
</section>

<!-- â•â•â• RESULTS DASHBOARD â•â•â• -->
<section class="section" id="results">
  <div class="sec-label">PoCè©•ä¾¡çµæœ</div>
  <h2 class="sec-title">å®Ÿãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚‹æ¤œè¨¼æ¸ˆã¿çµæœ</h2>
  <p class="sec-sub">TESDAã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ä½œæ¥­å‹•ç”»ã‚’ä½¿ç”¨ã—ãŸPoCè©•ä¾¡ã®å®Ÿæ¸¬å€¤ã€‚å…¨ã‚¸ãƒ§ãƒ–ã‚¨ãƒ©ãƒ¼ã‚¼ãƒ­ã§å®Œäº†ã€‚</p>

  <!-- KPI (96æ™‚é–“æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿) -->
  <div class="g4" style="margin-bottom:20px">
    <div class="stat">
      <div class="stat-label">æ¡ç‚¹ã‚¸ãƒ§ãƒ–æ•°</div>
      <div class="stat-val text-accent" id="kpi-jobs">â€”</div>
      <div class="stat-sub">96æ™‚é–“é€£ç¶š / ã‚¨ãƒ©ãƒ¼0</div>
    </div>
    <div class="stat">
      <div class="stat-label">NGè¦‹é€ƒã—ç‡</div>
      <div class="stat-val text-pass">0.0%</div>
      <div class="stat-sub">18ä»¶å…¨ä»¶æ¤œçŸ¥ (TP=18, FN=0)</div>
    </div>
    <div class="stat">
      <div class="stat-label">æ¡ç‚¹å†ç¾æ€§</div>
      <div class="stat-val text-pass">Â±0pt</div>
      <div class="stat-sub">å†æ¡ç‚¹ã‚¸ãƒƒã‚¿ãƒ¼ã‚¼ãƒ­</div>
    </div>
    <div class="stat">
      <div class="stat-label">ä¸­å¤®å€¤ã‚¹ã‚³ã‚¢</div>
      <div class="stat-val text-accent" id="kpi-p50">â€”</div>
      <div class="stat-sub">p90=100.0 / min=55.0</div>
    </div>
  </div>

  <!-- Score chart + deviation breakdown -->
  <div class="g2" style="margin-bottom:20px">
    <div class="card">
      <h3 style="margin-bottom:16px">ã‚¹ã‚³ã‚¢åˆ†å¸ƒ</h3>
      <div id="scoreChart" style="position:relative;height:190px"></div>
      <div style="display:flex;gap:16px;margin-top:10px;font-size:11px;color:var(--muted)">
        <span style="display:flex;align-items:center;gap:4px">
          <span style="display:inline-block;width:10px;height:2px;background:#10b981;border-radius:1px"></span>åˆæ ¼ãƒ©ã‚¤ãƒ³ (90pt)
        </span>
        <span style="display:flex;align-items:center;gap:4px">
          <span style="display:inline-block;width:10px;height:2px;background:#f59e0b;border-radius:1px"></span>è¦å†è¨“ç·´ (80pt)
        </span>
      </div>
    </div>
    <div class="card">
      <h3 style="margin-bottom:20px">é€¸è„±åˆ†é¡å†…è¨³</h3>
      <div style="display:flex;flex-direction:column;gap:14px">
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>ğŸ”´ Criticalï¼ˆé‡å¤§é€¸è„±ï¼‰</span>
            <span id="crit-count" style="font-weight:700;color:#10b981">â€”</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="crit-bar" style="width:0%;background:#ef4444"></div></div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">æ‰‹é †ã®çœç•¥ãƒ»èª¤å®Ÿæ–½ â†’ å³NG</div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>ğŸŸ¡ Qualityï¼ˆå“è³ªé€¸è„±ï¼‰</span>
            <span id="qual-count" style="font-weight:700;color:#10b981">â€”</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="qual-bar" style="width:0%;background:#f59e0b"></div></div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">æ–¹æ³•ã®èª¤ã‚Š â†’ ä¿®æ­£æŒ‡å°</div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>ğŸ”µ Efficiencyï¼ˆåŠ¹ç‡é€¸è„±ï¼‰</span>
            <span style="color:#60a5fa;font-weight:700" id="eff-count">â€”</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="eff-bar" style="width:0%;background:#3b82f6"></div></div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">æ™‚é–“è¶…é â†’ ã‚³ãƒ¼ãƒãƒ³ã‚°å¯¾è±¡</div>
        </div>
      </div>
      <div class="divider"></div>
      <div style="font-size:13px;color:var(--muted);line-height:1.6" id="dev-summary-text">
        PoCå®Ÿæ©Ÿå‹•ç”» 6ä»¶ã§ã¯åŠ¹ç‡é€¸è„±ã®ã¿ã€‚Critical 2ä»¶ã¯<strong style="color:#ef4444">NGãƒ‡ãƒ¢ã§æ­£ã—ãæ¤œçŸ¥</strong> â†’ <strong style="color:var(--pass)">é‡å¤§é€¸è„±ã®æ¤œçŸ¥èƒ½åŠ›ã‚’å®Ÿè¨¼âœ“</strong>
      </div>
    </div>
  </div>

  <!-- NG callout -->
  <div style="display:flex;align-items:center;gap:14px;padding:14px 20px;
    background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.25);
    border-radius:var(--r);margin-bottom:16px">
    <div style="font-size:24px;flex-shrink:0">ğŸš¨</div>
    <div>
      <strong style="color:#f87171">NGæ¤œçŸ¥ãƒ‡ãƒ¢ (æœ€çµ‚è¡Œ)</strong>
      <span style="color:var(--muted);font-size:13px;margin-left:8px">
        å®Ÿéš›ã®GoldåŸ‹ã‚è¾¼ã¿ã‹ã‚‰åˆæˆã—ãŸã€Œæ‰‹é †çœç•¥ã‚·ãƒŠãƒªã‚ªã€ã€‚é‡å¤§é€¸è„±2ä»¶ã‚’æ­£ã—ãFAILåˆ¤å®š â†’ ã‚·ã‚¹ãƒ†ãƒ ã®æ¤œçŸ¥èƒ½åŠ›ã‚’å®Ÿè¨¼ã€‚
      </span>
    </div>
  </div>

  <!-- Results table -->
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
      <h3>æ¡ç‚¹çµæœä¸€è¦§</h3>
      <span style="font-size:12px;color:var(--muted)">è¡Œã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã‚·ãƒŠãƒªã‚ªè©³ç´°ã¸ã‚¸ãƒ£ãƒ³ãƒ—</span>
    </div>
    <table id="resultsTable">
      <thead>
        <tr>
          <th>Job</th><th>ä½œæ¥­ç¨®åˆ¥</th><th>ã‚¹ã‚³ã‚¢</th><th>åˆ¤å®š</th>
          <th>Miss</th><th>Swap</th><th>Dev</th>
          <th>æ™‚é–“è¶…éç‡</th><th>DTW Cost</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </div>
</section>

<!-- â•â•â• 96æ™‚é–“æ¤œè¨¼ â•â•â• -->
<section class="section" id="validation">
  <div class="sec-label">96æ™‚é–“é€£ç¶šç¨¼åƒæ¤œè¨¼</div>
  <h2 class="sec-title">866ä»¶ Ã— <em style="font-style:normal;color:#10b981">NGè¦‹é€ƒã—ç‡ 0.0%</em></h2>
  <p class="sec-sub">å®Ÿéš›ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ãŸ96æ™‚é–“ãƒ»è‡ªå‹•é€£ç¶šæ¡ç‚¹ãƒ†ã‚¹ãƒˆã€‚å…¨å“è³ªã‚²ãƒ¼ãƒˆã‚’ãƒ‘ã‚¹ã€‚</p>

  <div class="g2" style="margin-bottom:20px">
    <!-- æ··åŒè¡Œåˆ— -->
    <div class="card">
      <h3 style="margin-bottom:18px">é‡å¤§é€¸è„± æ¤œçŸ¥æ€§èƒ½ï¼ˆæ··åŒè¡Œåˆ—ï¼‰</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px">
        <div style="padding:20px;background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);border-radius:10px;text-align:center">
          <div style="font-size:2.4rem;font-weight:900;color:#10b981">18</div>
          <div style="font-size:12px;font-weight:700;color:#10b981;margin-top:4px">TP â€” æ­£ã—ãNGæ¤œçŸ¥</div>
        </div>
        <div style="padding:20px;background:rgba(16,185,129,0.06);border:1px solid rgba(16,185,129,0.2);border-radius:10px;text-align:center">
          <div style="font-size:2.4rem;font-weight:900;color:#10b981">0</div>
          <div style="font-size:12px;font-weight:700;color:#10b981;margin-top:4px">FN â€” è¦‹é€ƒã—ï¼ˆã‚¼ãƒ­ï¼‰</div>
        </div>
        <div style="padding:20px;background:rgba(245,158,11,0.08);border:1px solid rgba(245,158,11,0.2);border-radius:10px;text-align:center">
          <div style="font-size:2.4rem;font-weight:900;color:#f59e0b">78</div>
          <div style="font-size:12px;font-weight:700;color:#f59e0b;margin-top:4px">FP â€” èª¤æ¤œçŸ¥ï¼ˆè¦æ”¹å–„ï¼‰</div>
        </div>
        <div style="padding:20px;background:rgba(16,185,129,0.06);border:1px solid rgba(16,185,129,0.2);border-radius:10px;text-align:center">
          <div style="font-size:2.4rem;font-weight:900;color:#10b981">266</div>
          <div style="font-size:12px;font-weight:700;color:#10b981;margin-top:4px">TN â€” æ­£ã—ãPASS</div>
        </div>
      </div>
      <div style="background:rgba(16,185,129,0.08);border:1px solid rgba(16,185,129,0.25);border-radius:8px;padding:14px 16px">
        <div style="font-size:13px;color:var(--muted);line-height:1.7">
          <strong style="color:#10b981">å®‰å…¨å´ã«å€’ã—ãŸè¨­è¨ˆï¼š</strong>
          FN=0ï¼ˆè¦‹é€ƒã—ã‚¼ãƒ­ï¼‰ã‚’æœ€å„ªå…ˆã€‚FP=78ï¼ˆèª¤æ¤œçŸ¥22.7%ï¼‰ã¯é–¾å€¤ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã§æ”¹å–„å¯èƒ½ã€‚
          åŒ»ç™‚ãƒ»é£Ÿå“ãƒ»è£½é€ ç¾å ´ã§ã¯ã€Œè¦‹é€ƒã—ã€ã‚ˆã‚Šã€Œèª¤å ±ã€ã®æ–¹ãŒè¨±å®¹ã§ãã‚‹ã€‚
        </div>
      </div>
    </div>

    <!-- å“è³ªã‚²ãƒ¼ãƒˆ -->
    <div class="card">
      <h3 style="margin-bottom:18px">å“è³ªã‚²ãƒ¼ãƒˆåˆ¤å®šï¼ˆå…¨é …ç›®PASSï¼‰</h3>
      <div style="display:flex;flex-direction:column;gap:10px">
        <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:8px">
          <span style="font-size:18px">âœ…</span>
          <div style="flex:1">
            <div style="font-weight:700;font-size:13px">Critical Miss Rate â‰¤ 10%</div>
            <div style="font-size:12px;color:var(--muted)">å®Ÿæ¸¬å€¤: <strong style="color:#10b981">0.0%</strong> â€” é–¾å€¤ã‚’å¤§å¹…ã«ä¸‹å›ã‚‹</div>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:8px">
          <span style="font-size:18px">âœ…</span>
          <div style="flex:1">
            <div style="font-weight:700;font-size:13px">Critical FPR â‰¤ 30%</div>
            <div style="font-size:12px;color:var(--muted)">å®Ÿæ¸¬å€¤: <strong style="color:#f59e0b">22.7%</strong> â€” é–¾å€¤å†…ï¼ˆæ”¹å–„ä½™åœ°ã‚ã‚Šï¼‰</div>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:8px">
          <span style="font-size:18px">âœ…</span>
          <div style="flex:1">
            <div style="font-weight:700;font-size:13px">æ¡ç‚¹ã‚¸ãƒƒã‚¿ãƒ¼ â‰¤ 5.0pt</div>
            <div style="font-size:12px;color:var(--muted)">å®Ÿæ¸¬å€¤: <strong style="color:#10b981">Â±0.0pt</strong> â€” å®Œå…¨å†ç¾æ€§</div>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:8px">
          <span style="font-size:18px">âœ…</span>
          <div style="flex:1">
            <div style="font-weight:700;font-size:13px">DTW Cost P90 â‰¤ 0.6</div>
            <div style="font-size:12px;color:var(--muted)">å®Ÿæ¸¬å€¤: <strong style="color:#10b981">0.073</strong> â€” é–¾å€¤ã®12%ä»¥å†…</div>
          </div>
        </div>
      </div>
      <div class="divider"></div>
      <div style="font-size:13px;color:var(--muted)">
        ã‚¹ã‚³ã‚¢çµ±è¨ˆ: å¹³å‡ 85.6pt / ä¸­å¤®å€¤ 95.3pt / P90 100.0pt / æœ€å° 55.0pt
      </div>
    </div>
  </div>

  <!-- NGå‹•ç”»ãƒ‘ã‚¿ãƒ¼ãƒ³ -->
  <div class="card">
    <h3 style="margin-bottom:14px">ãƒ†ã‚¹ãƒˆæ¸ˆã¿NGå‹•ç”»ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ18ä»¶ å…¨ä»¶æ¤œçŸ¥ï¼‰</h3>
    <div class="g3">
      <div style="padding:16px;background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.2);border-radius:10px">
        <div style="font-size:22px;margin-bottom:8px">âœ‚ï¸</div>
        <div style="font-weight:700;font-size:13px;color:#f87171;margin-bottom:6px">æœ«å°¾ã‚«ãƒƒãƒˆ (cut_tail)</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.6">ä½œæ¥­ã®å¾ŒåŠã‚¹ãƒ†ãƒƒãƒ—ã‚’çœç•¥ã—ãŸå‹•ç”»ã€‚å¾Œå‡¦ç†ãƒ»ç¢ºèªä½œæ¥­ã®æ¬ è½ã‚’å†ç¾ã€‚</div>
      </div>
      <div style="padding:16px;background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.2);border-radius:10px">
        <div style="font-size:22px;margin-bottom:8px">â­ï¸</div>
        <div style="font-weight:700;font-size:13px;color:#f87171;margin-bottom:6px">å†’é ­ã‚¹ã‚­ãƒƒãƒ— (skip_start)</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.6">ä½œæ¥­ã®å‰åŠã‚¹ãƒ†ãƒƒãƒ—ã‚’çœç•¥ã—ãŸå‹•ç”»ã€‚æº–å‚™ãƒ»ç¢ºèªæ‰‹é †ã®æ¬ è½ã‚’å†ç¾ã€‚</div>
      </div>
      <div style="padding:16px;background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.2);border-radius:10px">
        <div style="font-size:22px;margin-bottom:8px">ğŸ§Š</div>
        <div style="font-weight:700;font-size:13px;color:#f87171;margin-bottom:6px">ãƒ•ãƒªãƒ¼ã‚º (freeze)</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.6">ä½œæ¥­é€”ä¸­ã§å‹•ããŒæ­¢ã¾ã£ãŸå‹•ç”»ã€‚ä¸­æ–­ãƒ»æ”¾ç½®ãƒ»æ©Ÿå™¨ãƒˆãƒ©ãƒ–ãƒ«ã‚’å†ç¾ã€‚</div>
      </div>
    </div>
    <div style="margin-top:14px;padding:12px 16px;background:rgba(16,185,129,0.06);border:1px solid rgba(16,185,129,0.2);border-radius:8px;font-size:13px;color:var(--muted)">
      6æœ¬ã®TESDAå®ŸæŠ€å‹•ç”» Ã— 3ãƒ‘ã‚¿ãƒ¼ãƒ³ = <strong style="color:var(--text)">18ä»¶ã®NG</strong>
      ã‚’96æ™‚é–“ã«ã‚ãŸã‚Šå®šæœŸæŠ•å…¥ â†’ <strong style="color:#10b981">å…¨ä»¶Criticalé€¸è„±ã¨ã—ã¦æ­£ã—ãæ¤œçŸ¥ï¼ˆè¦‹é€ƒã—0ä»¶ï¼‰</strong>
    </div>
  </div>
</section>

<!-- â•â•â• SCENARIO EXPLORER â•â•â• -->
<section class="section" id="explorer">
  <div class="sec-label">ã‚·ãƒŠãƒªã‚ªè©³ç´°</div>
  <h2 class="sec-title">æ¡ç‚¹ã‚·ãƒŠãƒªã‚ªã‚’é¸æŠ</h2>
  <p class="sec-sub">ç ”ä¿®ç”Ÿã”ã¨ã®ã‚¹ã‚³ã‚¢è©³ç´°ãƒ»é€¸è„±ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»DTWæ•´åˆ—ãƒãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

  <div style="display:grid;grid-template-columns:260px 1fr;gap:20px">
    <!-- List -->
    <div>
      <div style="font-size:11px;color:var(--muted);font-weight:700;text-transform:uppercase;letter-spacing:.08em;margin-bottom:10px">ç ”ä¿®ç”Ÿä¸€è¦§</div>
      <div id="scenList" style="display:flex;flex-direction:column;gap:8px"></div>
    </div>
    <!-- Detail -->
    <div id="scenDetail"></div>
  </div>
</section>

<!-- â•â•â• ARCHITECTURE â•â•â• -->
<section class="section" id="arch">
  <div class="sec-label">ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ</div>
  <h2 class="sec-title">æœ¬ç•ªå±•é–‹å¯èƒ½ãªã‚ªãƒ³ãƒ—ãƒ¬è¨­è¨ˆ</h2>
  <p class="sec-sub">å…¨ãƒ‡ãƒ¼ã‚¿ãŒã‚ªãƒ³ãƒ—ãƒ¬ç’°å¢ƒã«é–‰ã˜ã‚‹ã€ã‚¨ã‚¢ã‚®ãƒ£ãƒƒãƒ—å¯¾å¿œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€‚</p>

  <div class="g2">
    <div>
      <div class="card" style="margin-bottom:16px">
        <h3 style="margin-bottom:16px">æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h3>
        <div class="arch-item">
          <div class="arch-item-title">AI ã‚¨ãƒ³ã‚¸ãƒ³</div>
          <div class="arch-item-body">V-JEPA2 (Meta Research, ViT-Large) Â· DTWæ•´åˆ— Â· ColorMotion fallback</div>
        </div>
        <div class="arch-item">
          <div class="arch-item-title">ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</div>
          <div class="arch-item-body">FastAPI Â· éåŒæœŸã‚¹ã‚³ã‚¢ã‚­ãƒ¥ãƒ¼ Â· SQLite Â· Python 3.11</div>
        </div>
        <div class="arch-item">
          <div class="arch-item-title">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</div>
          <div class="arch-item-body">Pure HTML/JS Â· å¤–éƒ¨CDNä¾å­˜ãªã— Â· ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç¨¼åƒå¯</div>
        </div>
        <div class="arch-item">
          <div class="arch-item-title">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</div>
          <div class="arch-item-body">ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  Â· SQLite DB Â· ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—/ãƒªã‚¹ãƒˆã‚¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆä»˜å±</div>
        </div>
        <div class="arch-item">
          <div class="arch-item-title">ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ãƒ‘ã‚¹</div>
          <div class="arch-item-body">FAISS/Qdrantæ¤œç´¢ Â· ãƒŠã‚¤ãƒˆãƒªãƒ¼ãƒ¢ãƒ‡ãƒ«æ›´æ–° Â· ãƒ¢ãƒ‡ãƒ«ãƒ¬ã‚¸ã‚¹ãƒˆãƒª Â· ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</div>
        </div>
      </div>
    </div>
    <div>
      <div class="card">
        <h3 style="margin-bottom:20px">å±•é–‹ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h3>
        <div>
          <div style="display:grid;grid-template-columns:72px 1fr;gap:14px;padding:14px 0;border-bottom:1px solid var(--border)">
            <div style="font-size:12px;font-weight:800;color:var(--accent-b);padding-top:2px">Day 0â€“14</div>
            <div>
              <div style="font-weight:700;font-size:14px;margin-bottom:4px">ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºç«‹</div>
              <div style="font-size:12px;color:var(--muted)">Gold 20æœ¬ + Trainee 50æœ¬åé›†ãƒ»æ¡ç‚¹ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æ¤œè¨¼ãƒ»é–¾å€¤åˆæ„</div>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:72px 1fr;gap:14px;padding:14px 0;border-bottom:1px solid var(--border)">
            <div style="font-size:12px;font-weight:800;color:var(--accent-b);padding-top:2px">Day 15â€“45</div>
            <div>
              <div style="font-weight:700;font-size:14px;margin-bottom:4px">1æ‹ ç‚¹ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ</div>
              <div style="font-size:12px;color:var(--muted)">è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’QAæ¥­å‹™ã«çµ„ã¿è¾¼ã¿ãƒ»é‡ã¿/é–¾å€¤ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ç›£æŸ»PDFå¯¾å¿œ</div>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:72px 1fr;gap:14px;padding:14px 0">
            <div style="font-size:12px;font-weight:800;color:var(--accent-b);padding-top:2px">Day 46â€“90</div>
            <div>
              <div style="font-weight:700;font-size:14px;margin-bottom:4px">æœ¬ç•ªç§»è¡Œ</div>
              <div style="font-size:12px;color:var(--muted)">FAISSæ¤œç´¢ãƒ»ãƒŠã‚¤ãƒˆãƒªãƒ¼å­¦ç¿’ãƒ»ã‚¹ã‚³ã‚¢ãƒ‰ãƒªãƒ•ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é…å¸ƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</div>
            </div>
          </div>
        </div>
      </div>
      <div class="card" style="margin-top:16px;background:rgba(13,148,136,.06);border-color:rgba(13,148,136,.25)">
        <h3 style="margin-bottom:14px;color:var(--accent-b)">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ</h3>
        <div style="font-size:13px;color:var(--muted);display:flex;flex-direction:column;gap:8px">
          <div>âœ“ &nbsp;æ˜ åƒãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ¼ãƒå¤–ã¸ä¸€åˆ‡é€ä¿¡ã—ãªã„</div>
          <div>âœ“ &nbsp;ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆéæ¥ç¶šï¼ˆã‚¨ã‚¢ã‚®ãƒ£ãƒƒãƒ—ï¼‰ç’°å¢ƒå¯¾å¿œ</div>
          <div>âœ“ &nbsp;ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚¹ãƒˆã‚¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆä»˜å±</div>
          <div>âœ“ &nbsp;è©•ä¾¡å±¥æ­´ãƒ»å¯©æŸ»ãƒ¡ãƒ¢ã‚’DBæ°¸ç¶šåŒ–ï¼ˆç›£æŸ»è¨¼è·¡ï¼‰</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â• LIVE SCORING â•â•â• -->
<section class="section" id="live">
  <div class="sec-label">ãƒ©ã‚¤ãƒ–æ¡ç‚¹</div>
  <h2 class="sec-title">ä»Šã™ãæ¡ç‚¹ã—ã¦ã¿ã‚‹</h2>
  <p class="sec-sub">
    ãƒ­ãƒ¼ã‚«ãƒ«ã§ API ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã¨ã€ã“ã“ã‹ã‚‰å®Ÿéš›ã«å‹•ç”»ã‚’æ¡ç‚¹ã§ãã¾ã™ã€‚<br>
    Gold å‹•ç”»ã‚’é¸æŠã—ã€ç ”ä¿®ç”Ÿå‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã§ã™ã€‚
  </p>

  <!-- API status bar -->
  <div style="display:flex;align-items:center;gap:14px;margin-top:28px;flex-wrap:wrap">
    <div class="live-api-status" id="liveStatusBadge">
      <div class="api-dot" id="liveApiDot"></div>
      <span id="liveApiLabel">APIã‚µãƒ¼ãƒãƒ¼ã‚’ç¢ºèªä¸­â€¦</span>
    </div>
    <span style="font-size:12px;color:var(--muted)" id="liveApiHint"></span>
    <button onclick="liveCheckApi()" style="margin-left:auto;padding:7px 16px;border-radius:8px;border:1px solid var(--border2);background:transparent;color:var(--muted);font:inherit;font-size:12px;cursor:pointer">å†ç¢ºèª</button>
  </div>

  <!-- Live stats bar (shown when API online) -->
  <div class="live-stats-bar" id="liveStatsBar">
    <div class="live-stat-item">
      <div class="live-stat-num" id="lstGold">â€”</div>
      <div class="live-stat-lbl">Gold å‹•ç”»</div>
    </div>
    <div class="live-stat-item">
      <div class="live-stat-num" id="lstTrainee">â€”</div>
      <div class="live-stat-lbl">ç ”ä¿®ç”Ÿå‹•ç”»</div>
    </div>
    <div class="live-stat-item">
      <div class="live-stat-num" id="lstJobs">â€”</div>
      <div class="live-stat-lbl">æ¡ç‚¹ã‚¸ãƒ§ãƒ–</div>
    </div>
    <div class="live-stat-item">
      <div class="live-stat-num" id="lstPass">â€”</div>
      <div class="live-stat-lbl">åˆæ ¼ç‡</div>
    </div>
  </div>

  <!-- Offline message -->
  <div class="live-offline-msg" id="liveOfflineMsg" style="display:none">
    <div style="font-size:36px;margin-bottom:12px">ğŸ”Œ</div>
    <h3 style="margin-bottom:8px">API ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã¾ã›ã‚“</h3>
    <p style="font-size:14px;color:var(--muted);max-width:480px;margin:0 auto 16px">
      ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãã ã•ã„ï¼ˆColor-Motion ãƒ¢ãƒ¼ãƒ‰: GPUä¸è¦ï¼‰
    </p>
    <div class="live-offline-code">scripts\poc_bootstrap.cmd</div>
    <p style="font-size:12px;color:var(--muted);margin-top:12px">
      èµ·å‹•å¾Œã€å³ä¸Šã®ã€Œå†ç¢ºèªã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
    </p>
  </div>

  <!-- Widget (shown when online) -->
  <div id="liveWidget" style="display:none">
    <div class="live-steps">
      <!-- Step 1: Gold video -->
      <div class="live-step-card active">
        <div>
          <div class="live-step-label">Step 1</div>
          <h4>Gold å‹•ç”»ã‚’é¸æŠ</h4>
          <p style="font-size:13px;color:var(--muted);margin-top:6px">
            ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç™»éŒ²æ¸ˆã¿ã®ã‚´ãƒ¼ãƒ«ãƒ‰å‹•ç”»ã‚’é¸ã³ã¾ã™
          </p>
        </div>
        <select class="gold-select" id="liveGoldSelect">
          <option value="">â€” Gold å‹•ç”»ã‚’é¸æŠ â€”</option>
        </select>
        <div id="liveGoldInfo" style="font-size:12px;color:var(--muted)"></div>
      </div>

      <!-- Step 2: Trainee video -->
      <div class="live-step-card">
        <div>
          <div class="live-step-label">Step 2</div>
          <h4>ç ”ä¿®ç”Ÿå‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h4>
          <p style="font-size:13px;color:var(--muted);margin-top:6px">
            MP4 / AVI / MOV ãªã©å¯¾å¿œå½¢å¼ã‚’ãƒ‰ãƒ­ãƒƒãƒ—
          </p>
        </div>
        <div class="drop-zone" id="liveDropZone">
          <input type="file" id="liveFileInput" accept="video/*" onchange="liveOnFileSelect(this)">
          <div class="drop-icon" id="liveDropIcon">ğŸ¥</div>
          <div class="drop-label" id="liveDropLabel">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ­ãƒƒãƒ—</div>
          <div class="drop-sub">MP4 Â· AVI Â· MOV Â· MKV</div>
          <div class="drop-file-name" id="liveDropFileName"></div>
        </div>
      </div>
    </div>

    <!-- Score button -->
    <button class="live-score-btn" id="liveScoreBtn" onclick="liveRunScore()" disabled>
      <span id="liveBtnIcon">â–¶</span>
      <span id="liveBtnLabel">Gold å‹•ç”»ã¨ç ”ä¿®ç”Ÿå‹•ç”»ã‚’é¸æŠã—ã¦ãã ã•ã„</span>
    </button>

    <!-- Progress -->
    <div class="live-progress" id="liveProgress">
      <div class="prog-label">
        <div class="prog-spinner"></div>
        <span id="liveProgLabel">å‡¦ç†ä¸­â€¦</span>
      </div>
      <div class="prog-bar-wrap"><div class="prog-bar" id="liveProgBar"></div></div>
    </div>

    <!-- Result -->
    <div class="live-result" id="liveResult">
      <div class="live-result-header">
        <div class="live-score-big" id="liveResultScore" style="color:var(--accent)">â€”</div>
        <div class="live-result-meta">
          <h3 id="liveResultTitle">æ¡ç‚¹å®Œäº†</h3>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px" id="liveResultBadges"></div>
        </div>
      </div>
      <div id="liveResultMetrics" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:16px"></div>
      <div id="liveResultDeviations"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:16px">
        <button class="btn-csv" id="liveCsvBtn" style="display:none" onclick="liveExportCSV()">ğŸ“¥ CSV ã§ä¿å­˜</button>
        <button class="live-retry-btn" onclick="liveReset()">â† ã‚‚ã†ä¸€åº¦æ¡ç‚¹ã™ã‚‹</button>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â• BUSINESS IMPACT â•â•â• -->
<section class="section" id="impact">
  <div class="sec-label">å°å…¥åŠ¹æœ</div>
  <h2 class="sec-title">å®šé‡çš„ãªåŠ¹æœç›®æ¨™</h2>
  <p class="sec-sub">å¾“æ¥ã®äººæ‰‹è©•ä¾¡ã¨ã®æ¯”è¼ƒã€‚90æ—¥ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆå®Œäº†æ™‚ã®ç›®æ¨™å€¤ã€‚</p>

  <div class="g2" style="margin-bottom:24px">
    <div class="card">
      <h3 style="margin-bottom:22px">Before / After</h3>
      <div style="display:flex;flex-direction:column;gap:0">
        <div style="display:grid;grid-template-columns:1fr 90px 1fr;gap:10px;align-items:center;padding:14px 0;border-bottom:1px solid var(--border)">
          <div style="text-align:right;color:var(--muted);font-size:13px">30ã€œ60åˆ† / ä»¶</div>
          <div style="text-align:center;font-size:10px;font-weight:800;color:var(--muted);text-transform:uppercase;letter-spacing:.06em">è©•ä¾¡æ™‚é–“</div>
          <div style="color:var(--accent-b);font-weight:700;font-size:13px">5ã€œ10åˆ† / ä»¶<br><span style="font-size:11px;color:#10b981">â–¼ 50%å‰Šæ¸›ç›®æ¨™</span></div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 90px 1fr;gap:10px;align-items:center;padding:14px 0;border-bottom:1px solid var(--border)">
          <div style="text-align:right;color:var(--muted);font-size:13px">è©•ä¾¡è€…ã®ä¸»è¦³ä¾å­˜</div>
          <div style="text-align:center;font-size:10px;font-weight:800;color:var(--muted);text-transform:uppercase;letter-spacing:.06em">è©•ä¾¡åŸºæº–</div>
          <div style="color:var(--accent-b);font-weight:700;font-size:13px">ã‚¹ã‚³ã‚¢æ•°å€¤ã§å®¢è¦³åŒ–</div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 90px 1fr;gap:10px;align-items:center;padding:14px 0;border-bottom:1px solid var(--border)">
          <div style="text-align:right;color:var(--muted);font-size:13px">ç´™ / è¡¨è¨ˆç®—</div>
          <div style="text-align:center;font-size:10px;font-weight:800;color:var(--muted);text-transform:uppercase;letter-spacing:.06em">ç›£æŸ»è¨¼è·¡</div>
          <div style="color:var(--accent-b);font-weight:700;font-size:13px">JSONè‡ªå‹•å‡ºåŠ›</div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 90px 1fr;gap:10px;align-items:center;padding:14px 0">
          <div style="text-align:right;color:var(--muted);font-size:13px">ç™ºè¦šã¾ã§æ™‚é–“ãŒã‹ã‹ã‚‹</div>
          <div style="text-align:center;font-size:10px;font-weight:800;color:var(--muted);text-transform:uppercase;letter-spacing:.06em">é‡å¤§é€¸è„±æ¤œçŸ¥</div>
          <div style="color:var(--accent-b);font-weight:700;font-size:13px">æ¡ç‚¹å®Œäº†æ™‚ã«å³æ™‚ã‚¢ãƒ©ãƒ¼ãƒˆ</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-bottom:22px">æˆåŠŸå®šç¾© (90æ—¥å¾Œ)</h3>
      <div style="display:flex;flex-direction:column;gap:18px">
        <div>
          <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px">
            <span style="font-size:14px;font-weight:600">è©•ä¾¡å·¥æ•°å‰Šæ¸›</span>
            <span class="text-accent" style="font-weight:900;font-size:1.6rem">50%</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="imp1" style="width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-b))"></div></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px">
            <span style="font-size:14px;font-weight:600">é‡å¤§SOPé€¸è„±å‰Šæ¸›</span>
            <span class="text-accent" style="font-weight:900;font-size:1.6rem">30%</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="imp2" style="width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-b))"></div></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px">
            <span style="font-size:14px;font-weight:600">å†æ¡ç‚¹ã‚¹ã‚³ã‚¢å®‰å®šæ€§</span>
            <span class="text-accent" style="font-weight:900;font-size:1.6rem">Â±1pt</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" id="imp3" style="width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-b))"></div></div>
        </div>
      </div>
      <div class="divider"></div>
      <div style="font-size:12px;color:var(--muted)">ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆå®Œäº†æ™‚ã«æ¸¬å®šãƒ»å ±å‘Šã—ã¾ã™ã€‚</div>
    </div>
  </div>

  <!-- CTA -->
  <div class="card" style="text-align:center;padding:52px;
    background:linear-gradient(135deg,rgba(13,148,136,.1),rgba(6,182,212,.05));
    border-color:rgba(13,148,136,.3)">
    <div style="font-size:52px;margin-bottom:18px">ğŸš€</div>
    <h2 style="margin-bottom:14px">ä»Šã™ããƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚’é–‹å§‹ã—ã¾ã›ã‚“ã‹ï¼Ÿ</h2>
    <p style="color:var(--muted);margin-bottom:36px;max-width:520px;margin-left:auto;margin-right:auto;line-height:1.75">
      Goldå‹•ç”» <strong style="color:var(--text)">2æœ¬</strong> + ç ”ä¿®ç”Ÿå‹•ç”» <strong style="color:var(--text)">æ•°æœ¬</strong> ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã¾ã™ã€‚<br>
      åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰æœ€åˆã®æ¡ç‚¹å®Œäº†ã¾ã§ <strong style="color:var(--accent-b)">1æ—¥ä»¥å†…</strong> ã«å®Œäº†ã—ã¾ã™ã€‚
    </p>
    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <a href="proposal.html" class="btn btn-primary" style="font-size:15px;padding:13px 28px;text-decoration:none">ãƒ‡ãƒ¢ç’°å¢ƒã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</a>
      <a href="proposal.html#spec" class="btn btn-ghost" style="font-size:15px;padding:13px 28px;text-decoration:none">æŠ€è¡“è³‡æ–™ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
    </div>
  </div>
</section>

<footer>
  SOPilot &nbsp;Â·&nbsp; On-Prem SOP Evaluation System &nbsp;Â·&nbsp; PoC v0.2 &nbsp;Â·&nbsp;
  Powered by V-JEPA2 + DTW &nbsp;Â·&nbsp; å…¨ãƒ‡ãƒ¼ã‚¿ã¯å¾¡ç¤¾ã‚µãƒ¼ãƒå†…ã«ä¿ç®¡ã•ã‚Œã¾ã™
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REAL PoC DATA  (from data_tesda eval run)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SCENARIOS = [
  {
    jobId:1, traineeId:3, goldId:2,
    name:"å»Šä¸‹æ¸…æƒ", nameEn:"Corridor Cleaning",
    score:96.67, decision:"pass",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:0.3333,dtw_normalized_cost:0.202067},
    goldClips:15, traineeClips:20,
    deviations:[{type:"over_time",severity:"efficiency",detail:"Over-time ratio 0.333 ãŒã—ãã„å€¤ 0.200 ã‚’è¶…é",over_time_ratio:0.333}],
    boundaries:{gold:[2],trainee:[2,7,18]},
    path:[[0,0],[1,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[8,10],[8,11],[8,12],[8,13],[9,14],[10,15],[11,16],[12,17],[13,18],[14,19]]
  },
  {
    jobId:2, traineeId:4, goldId:2,
    name:"ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼æ¸…æƒ", nameEn:"Elevator Cleaning",
    score:90.67, decision:"pass",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:0.9333,dtw_normalized_cost:0.136182},
    goldClips:15, traineeClips:29,
    deviations:[{type:"over_time",severity:"efficiency",detail:"Over-time ratio 0.933 ãŒã—ãã„å€¤ 0.200 ã‚’è¶…é",over_time_ratio:0.933}],
    boundaries:{gold:[2],trainee:[4,27]},
    path:[[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[6,7],[7,8],[8,9],[8,10],[9,11],[10,12],[11,13],[12,14],[13,15],[13,16],[13,17],[13,18],[13,19],[13,20],[13,21],[13,22],[13,23],[13,24],[13,25],[13,26],[14,27],[14,28]]
  },
  {
    jobId:3, traineeId:5, goldId:2,
    name:"ãƒ­ãƒ“ãƒ¼æ¸…æƒ", nameEn:"Lobby Cleaning",
    score:89.33, decision:"needs_review",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:1.0667,dtw_normalized_cost:0.148979},
    goldClips:15, traineeClips:31,
    deviations:[{type:"over_time",severity:"efficiency",detail:"Over-time ratio 1.067 ãŒã—ãã„å€¤ 0.200 ã‚’è¶…é â€” è¦ã‚³ãƒ¼ãƒãƒ³ã‚°",over_time_ratio:1.067}],
    boundaries:{gold:[2],trainee:[2,20]},
    path:[[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[9,15],[9,16],[9,17],[9,18],[10,19],[11,20],[12,21],[13,22],[13,23],[13,24],[13,25],[13,26],[13,27],[13,28],[13,29],[14,30]]
  },
  {
    jobId:4, traineeId:6, goldId:2,
    name:"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ¸…æƒ", nameEn:"Restaurant Cleaning",
    score:98.0, decision:"pass",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:0.2,dtw_normalized_cost:0.16515},
    goldClips:15, traineeClips:18,
    deviations:[],
    boundaries:{gold:[2],trainee:[2,17]},
    path:[[0,0],[1,1],[2,2],[3,3],[4,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[13,15],[13,16],[14,17]]
  },
  {
    jobId:5, traineeId:7, goldId:2,
    name:"ãƒˆã‚¤ãƒ¬æ¸…æƒ", nameEn:"Restroom Cleaning",
    score:94.67, decision:"pass",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:0.5333,dtw_normalized_cost:0.143915},
    goldClips:15, traineeClips:23,
    deviations:[{type:"over_time",severity:"efficiency",detail:"Over-time ratio 0.533 ãŒã—ãã„å€¤ 0.200 ã‚’è¶…é",over_time_ratio:0.533}],
    boundaries:{gold:[2],trainee:[21]},
    path:[[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10],[11,11],[12,12],[13,13],[13,14],[13,15],[13,16],[13,17],[13,18],[13,19],[13,20],[14,21],[14,22]]
  },
  {
    jobId:6, traineeId:8, goldId:2,
    name:"éšæ®µæ¸…æƒ", nameEn:"Stairs Cleaning",
    score:100.0, decision:"pass",
    metrics:{miss_steps:0,swap_steps:0,deviation_steps:0,over_time_ratio:0.0,dtw_normalized_cost:0.124496},
    goldClips:15, traineeClips:15,
    deviations:[],
    boundaries:{gold:[2],trainee:[2,13]},
    path:[[0,0],[1,1],[2,2],[3,3],[4,4],[5,4],[6,5],[7,6],[8,7],[9,8],[10,9],[11,10],[12,11],[13,12],[13,13],[14,14]]
  },
  // â”€â”€ NG FAIL DEMO A: TESDA NG (synthesized from real gold embeddings) â”€â”€
  {
    jobId:"NG-A", traineeId:-1, goldId:2,
    name:"âš  æ‰‹é †çœç•¥ NGâ‘ ", nameEn:"Step-Skipping FAIL Demo A",
    score:55.0, decision:"fail",
    metrics:{miss_steps:2,swap_steps:0,deviation_steps:0,over_time_ratio:0.0,dtw_normalized_cost:0.3400},
    goldClips:15, traineeClips:4,
    deviations:[
      {type:"missing_step",severity:"critical",
       detail:"æ‰‹é †ã‚¹ãƒ†ãƒƒãƒ—0 (Gold clip 0â€“3): DTWæ•´åˆ—ã‚¹ãƒ‘ãƒ³ãŒåç¸®ã€‚æ‰‹é †ãŒçœç•¥ã¾ãŸã¯æœªå®Œäº†ã€‚",
       gold_clip_range:[0,3],trainee_clip_range:[0,0]},
      {type:"missing_step",severity:"critical",
       detail:"æ‰‹é †ã‚¹ãƒ†ãƒƒãƒ—1 (Gold clip 4â€“14): DTWæ•´åˆ—ã‚¹ãƒ‘ãƒ³ãŒåç¸®ã€‚æ‰‹é †ãŒçœç•¥ã¾ãŸã¯æœªå®Œäº†ã€‚",
       gold_clip_range:[4,14],trainee_clip_range:[0,3]}
    ],
    boundaries:{gold:[4],trainee:[3]},
    path:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0],[11,0],[12,1],[13,2],[14,3]],
    isSynthesized:true
  },
  // â”€â”€ NG FAIL DEMO B: OSHA Respirator Maintenance (real public-domain video) â”€â”€
  {
    jobId:"NG-B", traineeId:-1, goldId:10,
    name:"âš  æ‰‹é †çœç•¥ NGâ‘¡", nameEn:"Respirator Maintenance FAIL Demo",
    score:68.33, decision:"fail",
    metrics:{miss_steps:1,swap_steps:0,deviation_steps:2,over_time_ratio:0.0,dtw_normalized_cost:0.3298},
    goldClips:41, traineeClips:6,
    deviations:[
      {type:"missing_step",severity:"critical",
       detail:"æ‰‹é †ã‚¹ãƒ†ãƒƒãƒ—0 (Gold clip 0â€“33): Gold 34ã‚¯ãƒªãƒƒãƒ—ãŒç ”ä¿®ç”Ÿ1ã‚¯ãƒªãƒƒãƒ—ã«åç¸®ã€‚æ‰‹é †ã®83%ãŒæœªå®Ÿæ–½ã€‚",
       gold_clip_range:[0,33],trainee_clip_range:[0,0]},
      {type:"step_deviation",severity:"quality",
       detail:"æ‰‹é †ã‚¹ãƒ†ãƒƒãƒ—1 (Gold clip 34â€“39): å‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåŸºæº–ã‹ã‚‰é€¸è„± (cosineè·é›¢=0.677)",
       gold_clip_range:[34,39],trainee_clip_range:[0,4]},
      {type:"step_deviation",severity:"quality",
       detail:"æ‰‹é †ã‚¹ãƒ†ãƒƒãƒ—2 (Gold clip 40): å‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåŸºæº–ã‹ã‚‰å¤§å¹…ã«é€¸è„± (cosineè·é›¢=1.330)",
       gold_clip_range:[40,40],trainee_clip_range:[5,5]}
    ],
    boundaries:{gold:[34,40],trainee:[5]},
    path:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0],[11,0],[12,0],[13,0],[14,0],[15,0],[16,0],[17,0],[18,0],[19,0],[20,0],[21,0],[22,0],[23,0],[24,0],[25,0],[26,0],[27,0],[28,0],[29,0],[30,0],[31,0],[32,0],[33,0],[34,0],[35,0],[36,1],[37,2],[38,3],[39,4],[40,5]],
    isSynthesized:true,
    sourceLabel:"OSHAå…¬å¼å‹•ç”»: Maintenance and Care of Respirators (ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‰ãƒ¡ã‚¤ãƒ³)"
  }
];

const AVG = 94.89, PASS_N = 5, TOTAL_N = 6;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UTILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function lerp(a,b,t){return a+(b-a)*t}
function easeOut(t){return 1-Math.pow(1-t,3)}
function animCount(el,from,to,dur,dec=0,suf=""){
  const t0=performance.now();
  (function frame(now){
    const t=Math.min((now-t0)/dur,1);
    el.textContent=lerp(from,to,easeOut(t)).toFixed(dec)+suf;
    if(t<1)requestAnimationFrame(frame);
  })(t0);
}
function scoreColor(s){
  if(s>=95)return"#10b981";
  if(s>=90)return"#14b8a6";
  if(s>=80)return"#f59e0b";
  return"#ef4444";
}
function decisionPill(d){
  if(d==="pass")return'<span class="pill pill-pass">âœ“ PASS</span>';
  if(d==="needs_review")return'<span class="pill pill-review">âš  REVIEW</span>';
  return'<span class="pill pill-fail">âœ— FAIL</span>';
}
function mkEl(tag,attrs={},html=""){
  const el=document.createElement(tag);
  Object.assign(el,attrs);
  if(html)el.innerHTML=html;
  return el;
}
function svgEl(tag,attrs={}){
  const el=document.createElementNS("http://www.w3.org/2000/svg",tag);
  for(const[k,v]of Object.entries(attrs))el.setAttribute(k,v);
  return el;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INTERSECTION OBSERVER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let kpiDone=false, impactDone=false;
const io=new IntersectionObserver(entries=>{
  for(const e of entries){
    if(!e.isIntersecting)continue;
    if(e.target.id==="results"&&!kpiDone){kpiDone=true;animKPIs();}
    if(e.target.id==="impact"&&!impactDone){impactDone=true;animImpact();}
  }
},{threshold:0.15});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HERO METRICS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 96æ™‚é–“æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿæ¸¬å€¤ï¼‰
const TRIP = {
  jobs: 866, missRate: 0.0, jitter: 0.0,
  tp: 18, fn: 0, fp: 78, tn: 266,
  scoreMean: 85.6, scoreP50: 95.33, scoreP90: 100.0,
  fpr: 22.7
};

function initHero(){
  setTimeout(()=>{
    animCount(document.getElementById("hm-jobs"),0,TRIP.jobs,1400,0,"ä»¶");
    const missEl=document.getElementById("hm-miss");
    if(missEl) setTimeout(()=>{missEl.textContent="0.0%"},600);
    const jitterEl=document.getElementById("hm-jitter");
    if(jitterEl) setTimeout(()=>{jitterEl.textContent="Â±0pt"},800);
  },600);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KPI SECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function animKPIs(){
  animCount(document.getElementById("kpi-jobs"),0,TRIP.jobs,1200,0,"ä»¶");
  animCount(document.getElementById("kpi-p50"),0,TRIP.scoreP50,1000,1,"pt");
  const effN=SCENARIOS.reduce((s,sc)=>s+sc.deviations.filter(d=>d.severity==="efficiency").length,0);
  const critN=SCENARIOS.reduce((s,sc)=>s+sc.deviations.filter(d=>d.severity==="critical").length,0);
  const qualN=SCENARIOS.reduce((s,sc)=>s+sc.deviations.filter(d=>d.severity==="quality").length,0);
  document.getElementById("eff-count").textContent=effN+"ä»¶";
  const critEl=document.getElementById("crit-count");
  const qualEl=document.getElementById("qual-count");
  if(critEl){
    critEl.textContent=critN+"ä»¶";
    critEl.style.color=critN>0?"#ef4444":"#10b981";
  }
  if(qualEl){
    qualEl.textContent=qualN+"ä»¶";
    qualEl.style.color=qualN>0?"#f59e0b":"#10b981";
  }
  setTimeout(()=>{
    document.getElementById("eff-bar").style.width=Math.round(effN/(effN+critN+qualN||1)*100)+"%";
    const cb=document.getElementById("crit-bar");
    const qb=document.getElementById("qual-bar");
    if(cb)cb.style.width=critN>0?"100%":"0%";
    if(qb)qb.style.width=qualN>0?Math.round(qualN/(effN+critN+qualN||1)*100)+"%":"0%";
  },300);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCORE BAR CHART (SVG)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildScoreChart(){
  const wrap=document.getElementById("scoreChart");
  // Use offsetWidth (includes padding) or fallback; ensure positive
  const W=Math.max(wrap.offsetWidth||wrap.clientWidth,300)||420, H=190;
  const pad={t:18,r:16,b:36,l:38};
  const cW=W-pad.l-pad.r, cH=H-pad.t-pad.b;
  const MIN=50,MAX=100;
  const svg=svgEl("svg",{width:W,height:H,viewBox:`0 0 ${W} ${H}`});

  // Grid lines + Y labels
  [50,60,70,80,90,95,100].forEach(v=>{
    const y=pad.t+cH-((v-MIN)/(MAX-MIN))*cH;
    svg.appendChild(svgEl("line",{x1:pad.l,x2:pad.l+cW,y1:y,y2:y,
      stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"}));
    const lbl=svgEl("text",{x:pad.l-5,y:y+4,fill:"#475569","font-size":"10","text-anchor":"end"});
    lbl.textContent=v; svg.appendChild(lbl);
  });

  // Pass line
  const passY=pad.t+cH-((90-MIN)/(MAX-MIN))*cH;
  svg.appendChild(svgEl("line",{x1:pad.l,x2:pad.l+cW,y1:passY,y2:passY,
    stroke:"#10b981","stroke-width":"1.5","stroke-dasharray":"5 4"}));

  // Retrain line
  const retrainY=pad.t+cH-((80-MIN)/(MAX-MIN))*cH;
  svg.appendChild(svgEl("line",{x1:pad.l,x2:pad.l+cW,y1:retrainY,y2:retrainY,
    stroke:"#f59e0b","stroke-width":"1","stroke-dasharray":"3 4","opacity":".6"}));

  const bW=(cW/SCENARIOS.length)*0.62;
  const bGap=cW/SCENARIOS.length;

  SCENARIOS.forEach((s,i)=>{
    const x=pad.l+i*bGap+(bGap-bW)/2;
    const bH=((s.score-MIN)/(MAX-MIN))*cH;
    const y=pad.t+cH-bH;
    const col=scoreColor(s.score);

    // Background slot
    const bg=svgEl("rect",{x,y:pad.t,width:bW,height:cH,
      fill:"rgba(255,255,255,0.025)",rx:"4"});
    svg.appendChild(bg);

    // Bar (animated)
    const bar=svgEl("rect",{x,y:pad.t+cH,width:bW,height:0,fill:col,rx:"4",opacity:".9"});
    svg.appendChild(bar);
    setTimeout(()=>{
      bar.style.transition=`y .75s cubic-bezier(.4,0,.2,1) ${i*.08}s,height .75s cubic-bezier(.4,0,.2,1) ${i*.08}s`;
      bar.setAttribute("y",y); bar.setAttribute("height",bH);
    },200);

    // Score label
    const st=svgEl("text",{x:x+bW/2,y:y-5,fill:col,"font-size":"10","font-weight":"800","text-anchor":"middle"});
    st.textContent=s.score; svg.appendChild(st);

    // X label (job id)
    const xl=svgEl("text",{x:x+bW/2,y:H-4,fill:"#475569","font-size":"9","text-anchor":"middle"});
    xl.textContent=`#${s.jobId}`; svg.appendChild(xl);
  });

  wrap.appendChild(svg);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESULTS TABLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildTable(){
  const tbody=document.getElementById("resultsBody");
  SCENARIOS.forEach((s,i)=>{
    const tr=mkEl("tr");
    const otPct=Math.min(s.metrics.over_time_ratio*50,100);
    const col=scoreColor(s.score);
    const isFail=s.decision==="fail";
    if(isFail){
      tr.style.cssText="background:rgba(239,68,68,0.04)";
    }
    const traineeLabel=s.traineeId<0
      ? `<span style="font-size:10px;color:#ef4444;background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.3);border-radius:4px;padding:1px 5px;font-weight:700">åˆæˆNGãƒ‡ãƒ¢</span>`
      : `Gold #${s.goldId} Ã— Trainee #${s.traineeId}`;
    tr.innerHTML=`
      <td style="color:${isFail?"#ef4444":"var(--muted)"};font-weight:700">#${s.jobId}</td>
      <td><div style="font-weight:700;display:flex;align-items:center;gap:6px">${s.name}${isFail?'<span style="font-size:9px;color:#ef4444;background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.35);border-radius:4px;padding:1px 5px;font-weight:800;letter-spacing:.04em">CRITICAL</span>':''}</div>
          <div style="font-size:11px;color:var(--muted);margin-top:2px">${traineeLabel}</div></td>
      <td><span style="font-size:1.25rem;font-weight:900;color:${col}">${s.score}</span></td>
      <td>${decisionPill(s.decision)}</td>
      <td style="color:${s.metrics.miss_steps>0?"#ef4444":"var(--muted)"};font-weight:${s.metrics.miss_steps>0?700:400}">
          ${s.metrics.miss_steps}</td>
      <td style="color:${s.metrics.swap_steps>0?"#f59e0b":"var(--muted)"}">
          ${s.metrics.swap_steps}</td>
      <td style="color:${s.metrics.deviation_steps>0?"#f59e0b":"var(--muted)"}">
          ${s.metrics.deviation_steps}</td>
      <td><div style="display:flex;align-items:center;gap:8px">
            <div style="width:72px;background:rgba(255,255,255,.06);border-radius:999px;height:5px;overflow:hidden">
              <div style="height:100%;width:${otPct}%;background:#3b82f6;border-radius:999px"></div></div>
            <span style="font-size:12px;color:var(--muted)">${s.metrics.over_time_ratio.toFixed(2)}</span>
          </div></td>
      <td style="font-size:12px;color:var(--muted)">${s.metrics.dtw_normalized_cost.toFixed(4)}</td>`;
    tr.addEventListener("click",()=>{
      document.querySelectorAll("#scenList .scen-btn").forEach((b,j)=>
        b.classList.toggle("active",j===i));
      showScenario(s);
      document.getElementById("explorer").scrollIntoView({behavior:"smooth"});
    });
    tbody.appendChild(tr);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCENARIO LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildScenList(){
  const list=document.getElementById("scenList");
  SCENARIOS.forEach((s,i)=>{
    const isFail=s.decision==="fail";
    const btn=mkEl("button",{className:"scen-btn"+(i===0?" active":"")});
    if(isFail) btn.dataset.fail="1";
    const col=scoreColor(s.score);
    if(isFail){
      btn.style.cssText="border-color:rgba(239,68,68,0.4);background:rgba(239,68,68,0.04)";
    }
    const critCount=s.deviations.filter(d=>d.severity==="critical").length;
    btn.innerHTML=`
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="scen-name" style="${isFail?"color:#f87171":""}">
          ${s.name}
        </div>
        <div class="scen-score" style="color:${col}">${s.score}</div>
      </div>
      <div style="display:flex;gap:6px;margin-top:4px;align-items:center;flex-wrap:wrap">
        ${decisionPill(s.decision)}
        ${critCount>0
          ? `<span style="font-size:11px;color:#f87171;font-weight:700">âš  CriticalÃ—${critCount}</span>`
          : s.deviations.length>0
            ? `<span style="font-size:11px;color:#60a5fa">${s.deviations.length}ä»¶ã®é€¸è„±</span>`
            : `<span style="font-size:11px;color:#10b981">é€¸è„±ãªã— âœ“</span>`}
        ${s.isSynthesized?`<span style="font-size:9px;color:#94a3b8;border:1px solid rgba(148,163,184,.3);border-radius:3px;padding:0 4px">åˆæˆ</span>`:""}
      </div>`;
    btn.addEventListener("click",()=>{
      document.querySelectorAll(".scen-btn").forEach(b=>{
        b.classList.remove("active");
        // restore fail-specific border on non-active fail btn
        const sc=SCENARIOS[Array.from(list.children).indexOf(b)];
        if(sc&&sc.decision==="fail"){
          b.style.cssText="border-color:rgba(239,68,68,0.4);background:rgba(239,68,68,0.04)";
        }
      });
      btn.classList.add("active");
      if(isFail) btn.style.cssText="border-color:#ef4444;background:rgba(239,68,68,0.1)";
      showScenario(s);
    });
    list.appendChild(btn);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DTW MATRIX SVG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildDTW(s){
  const gLen=s.goldClips, tLen=s.traineeClips;
  // Non-square cells: let rows/cols scale independently within bounds
  const cellH=Math.max(5,Math.min(16,Math.floor(260/gLen)));
  const cellW=Math.max(8,Math.min(24,Math.floor(220/tLen)));
  const cell=Math.min(cellH,cellW);  // fallback for square grid elements
  const cH=cellH, cW=cellW;
  const ox=44,oy=14;
  const W=tLen*cW+ox+20, H=gLen*cH+oy+36;
  const svg=svgEl("svg",{viewBox:`0 0 ${W} ${H}`,"width":"100%"});
  svg.style.maxHeight="230px";

  // Grid
  for(let g=0;g<gLen;g++)for(let t=0;t<tLen;t++){
    svg.appendChild(svgEl("rect",{
      x:ox+t*cW,y:oy+(gLen-1-g)*cH,width:cW-1,height:cH-1,
      fill:"rgba(255,255,255,0.03)",stroke:"rgba(255,255,255,0.04)","stroke-width":"0.5"}));
  }

  // Diagonal reference
  svg.appendChild(svgEl("line",{
    x1:ox,x2:ox+tLen*cW,y1:oy+gLen*cH,y2:oy,
    stroke:"rgba(255,255,255,0.07)","stroke-width":"1"}));

  // Gold boundaries (horizontal)
  s.boundaries.gold.forEach(b=>{
    const y=oy+(gLen-1-b)*cH;
    svg.appendChild(svgEl("line",{x1:ox,x2:ox+tLen*cW,y1:y,y2:y,
      stroke:"rgba(13,148,136,0.6)","stroke-width":"1.5","stroke-dasharray":"4 2"}));
  });

  // Trainee boundaries (vertical)
  s.boundaries.trainee.forEach(b=>{
    const x=ox+b*cW;
    svg.appendChild(svgEl("line",{x1:x,x2:x,y1:oy,y2:oy+gLen*cH,
      stroke:"rgba(96,165,250,0.55)","stroke-width":"1.5","stroke-dasharray":"4 2"}));
  });

  // DTW path (actual alignment) â€” staggered cell reveal
  if(s.path&&s.path.length>0){
    const pathCells=[];
    s.path.forEach(([g,t])=>{
      const x=ox+t*cW, y=oy+(gLen-1-g)*cH;
      const r=svgEl("rect",{x,y,width:cW-1,height:cH-1,
        fill:"rgba(13,148,136,0.72)",rx:"1",opacity:"0"});
      svg.appendChild(r);
      pathCells.push(r);
    });
    pathCells.forEach((r,i)=>{setTimeout(()=>r.setAttribute("opacity","1"),i*20);});

    const pts=s.path.map(([g,t])=>
      `${ox+t*cW+(cW-1)/2},${oy+(gLen-1-g)*cH+(cH-1)/2}`).join(" ");
    const poly=svgEl("polyline",{points:pts,
      fill:"none",stroke:"rgba(20,184,166,0.85)","stroke-width":"1.5",
      "stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});
    svg.appendChild(poly);
    setTimeout(()=>{
      poly.style.transition="opacity 0.5s ease";
      poly.setAttribute("opacity","1");
    },s.path.length*20+80);
  }

  // Axis labels
  const xl=svgEl("text",{x:ox+tLen*cW/2,y:H-4,fill:"#475569",
    "font-size":"10","text-anchor":"middle"});
  xl.textContent=`ç ”ä¿®ç”Ÿã‚¯ãƒªãƒƒãƒ— (${tLen}æœ¬)`;
  svg.appendChild(xl);

  const yl=svgEl("text",{x:10,y:oy+gLen*cH/2,fill:"#475569",
    "font-size":"10","text-anchor":"middle",
    transform:`rotate(-90,10,${oy+gLen*cH/2})`});
  yl.textContent=`Gold (${gLen}æœ¬)`;
  svg.appendChild(yl);

  return svg;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCENARIO DETAIL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let scanTimer=null;
function showScenario(s){
  const detail=document.getElementById("scenDetail");

  // Show scanning animation first
  detail.innerHTML=`
    <div class="scanning">
      <div style="font-size:40px">ğŸ§ </div>
      <div class="scan-label">AIè§£æä¸­...</div>
      <div class="scan-bar-wrap"><div class="scan-bar-fill" id="scanFill"></div></div>
      <div class="scan-sublabel" id="scanSub">å‹•ç”»ã‚¯ãƒªãƒƒãƒ—ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™</div>
    </div>`;

  const fill=document.getElementById("scanFill");
  const sub=document.getElementById("scanSub");
  const steps=["å‹•ç”»ã‚¯ãƒªãƒƒãƒ—ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™","V-JEPA2 ã‚¨ãƒ³ãƒ™ãƒ‡ã‚£ãƒ³ã‚°ç”Ÿæˆä¸­","DTWã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æ‰‹é †æ•´åˆ—ä¸­","é€¸è„±ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™","ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™"];
  let pct=0, step=0;
  if(scanTimer)clearInterval(scanTimer);
  scanTimer=setInterval(()=>{
    pct=Math.min(pct+1.8,100);
    fill.style.width=pct+"%";
    const si=Math.floor(pct/100*steps.length);
    if(si<steps.length&&si!==step){step=si;sub.textContent=steps[si];}
    if(pct>=100){
      clearInterval(scanTimer);
      setTimeout(()=>renderScenDetail(s,detail),180);
    }
  },18);
}

function renderScenDetail(s,detail){
  const R=52, C=66, circ=2*Math.PI*R;
  const col=scoreColor(s.score);
  const otPct=Math.min(s.metrics.over_time_ratio/2*100,100);
  const critCount=s.deviations.filter(d=>d.severity==="critical").length;

  const critBanner=critCount>0?`
  <div style="display:flex;align-items:flex-start;gap:14px;padding:16px 20px;
    background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.4);
    border-radius:var(--r);margin-bottom:14px;animation:fadeInUp .4s ease both">
    <div style="font-size:28px;flex-shrink:0;line-height:1">ğŸš¨</div>
    <div>
      <div style="font-weight:800;font-size:14px;color:#f87171;margin-bottom:5px">
        CRITICAL ALERT â€” é‡å¤§SOPé€¸è„±ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ
      </div>
      <div style="font-size:13px;color:#fca5a5;line-height:1.6">
        <strong>${critCount}ä»¶ã®é‡å¤§é€¸è„±ï¼ˆæ‰‹é †çœç•¥ï¼‰</strong>ã‚’æ¤œå‡ºã€‚ã‚¹ã‚³ã‚¢ ${s.score}ç‚¹ã€‚
        ã“ã®ã‚·ãƒŠãƒªã‚ªã¯<strong>å³æ™‚NG</strong>åˆ¤å®š â€” å†æ•™è‚²ãŒå¿…è¦ã§ã™ã€‚
      </div>
      ${s.isSynthesized?`<div style="margin-top:8px;font-size:11px;color:#f87171;opacity:.7">
        â€» ã“ã®ã‚·ãƒŠãƒªã‚ªã¯å®Ÿéš›ã®GoldåŸ‹ã‚è¾¼ã¿ã‹ã‚‰åˆæˆã—ãŸæ¤œçŸ¥ãƒ‡ãƒ¢ã§ã™
      </div>`:""}
    </div>
  </div>`:s.isSynthesized?`
  <div style="padding:10px 16px;background:rgba(148,163,184,0.06);border:1px solid rgba(148,163,184,0.15);border-radius:var(--r-sm);margin-bottom:12px;font-size:12px;color:var(--muted)">
    â€» ã“ã®ã‚·ãƒŠãƒªã‚ªã¯å®Ÿéš›ã®GoldåŸ‹ã‚è¾¼ã¿ã‹ã‚‰åˆæˆã—ãŸæ¤œçŸ¥ãƒ‡ãƒ¢ã§ã™
  </div>`:"";

  detail.innerHTML=`
  ${critBanner}
  <div style="display:grid;grid-template-columns:148px 1fr;gap:16px;margin-bottom:16px">
    <!-- Score ring card -->
    <div class="card" style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:20px">
      <div class="ring-wrap">
        <svg class="ring-svg" viewBox="0 0 132 132">
          <circle class="ring-bg" cx="66" cy="66" r="${R}"/>
          <circle class="ring-fill" id="ringArc" cx="66" cy="66" r="${R}"
            stroke="${col}"
            stroke-dasharray="${circ}" stroke-dashoffset="${circ}"/>
        </svg>
        <div class="ring-center">
          <div class="ring-number" id="ringNum" style="color:${col}">0</div>
          <div class="ring-lbl">Score</div>
        </div>
      </div>
      ${decisionPill(s.decision)}
      <div style="font-size:12px;font-weight:700;color:var(--muted);text-align:center">${s.name}</div>
    </div>

    <!-- Metrics -->
    <div class="card">
      <h3 style="margin-bottom:14px">ã‚¹ã‚³ã‚¢å†…è¨³</h3>
      <div style="display:flex;flex-direction:column;gap:12px">
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>æ‰‹é †éºæ¼ (Miss Steps)</span>
            <span style="font-weight:800;color:${s.metrics.miss_steps>0?"#ef4444":"#10b981"}">${s.metrics.miss_steps}ä»¶</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" style="width:${s.metrics.miss_steps*25}%;background:#ef4444"></div></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>æ‰‹é †å…¥æ›¿ (Order Swap)</span>
            <span style="font-weight:800;color:${s.metrics.swap_steps>0?"#f59e0b":"#10b981"}">${s.metrics.swap_steps}ä»¶</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" style="width:${s.metrics.swap_steps*25}%;background:#f59e0b"></div></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>å®Ÿæ–½é€¸è„± (Deviation)</span>
            <span style="font-weight:800;color:${s.metrics.deviation_steps>0?"#f59e0b":"#10b981"}">${s.metrics.deviation_steps}ä»¶</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" style="width:${s.metrics.deviation_steps*25}%;background:#f59e0b"></div></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px">
            <span>æ™‚é–“è¶…éç‡ (Over-time)</span>
            <span style="font-weight:800;color:${s.metrics.over_time_ratio>0.2?"#3b82f6":"#10b981"}">${(s.metrics.over_time_ratio*100).toFixed(0)}%</span>
          </div>
          <div class="prog-wrap"><div class="prog-fill" style="width:${otPct}%;background:#3b82f6"></div></div>
        </div>
      </div>
      <div class="divider"></div>
      <div style="display:flex;gap:20px;font-size:12px;color:var(--muted)">
        <span>Goldã‚¯ãƒªãƒƒãƒ—: <strong style="color:var(--text)">${s.goldClips}</strong></span>
        <span>ç ”ä¿®ç”Ÿã‚¯ãƒªãƒƒãƒ—: <strong style="color:var(--text)">${s.traineeClips}</strong></span>
        <span>DTW cost: <strong style="color:var(--text)">${s.metrics.dtw_normalized_cost.toFixed(4)}</strong></span>
      </div>
    </div>
  </div>

  <!-- Timeline -->
  <div class="card" style="margin-bottom:16px">
    <h3 style="margin-bottom:14px">å®Ÿè¡Œã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</h3>
    <div class="tl-label">Gold åŸºæº– (${s.goldClips}ã‚¯ãƒªãƒƒãƒ—)</div>
    <div class="tl-wrap" style="margin-bottom:12px">
      <div class="tl-gold" id="tlGold" style="width:0%"></div>
      ${s.boundaries.gold.map(b=>{
        const pct=b/s.goldClips*100;
        return `<div class="tl-dev" style="left:${pct}%;width:2px;background:#14b8a6;border:none"></div>`;
      }).join("")}
    </div>
    <div class="tl-label">ç ”ä¿®ç”Ÿ (${s.traineeClips}ã‚¯ãƒªãƒƒãƒ—)</div>
    <div class="tl-wrap" style="margin-bottom:12px">
      <div class="tl-gold" id="tlTrainee" style="width:0%;background:linear-gradient(90deg,${col}99,${col}66)"></div>
      ${s.boundaries.trainee.map(b=>{
        const pct=b/s.traineeClips*100;
        return `<div class="tl-dev" style="left:${pct-1}%;width:2px;background:#3b82f6;border:none"></div>`;
      }).join("")}
      ${s.metrics.over_time_ratio>0.2?`
      <div class="tl-dev" style="left:${Math.round(100/(1+s.metrics.over_time_ratio))}%;
        width:${Math.round(100-100/(1+s.metrics.over_time_ratio))}%;
        background:rgba(59,130,246,0.25);border-color:#3b82f6">
      </div>`:``}
    </div>
    <div style="font-size:12px;color:var(--muted)">
      ç¸¦ç·š: ã‚¹ãƒ†ãƒƒãƒ—å¢ƒç•Œ &nbsp;|&nbsp;
      ${s.metrics.over_time_ratio>0.2?`<span style="color:#3b82f6">é’ã„é ˜åŸŸ: æ™‚é–“è¶…ééƒ¨åˆ† (Goldæ¯” +${(s.metrics.over_time_ratio*100).toFixed(0)}%)</span>`
       :`<span style="color:#10b981">æ™‚é–“è¶…éãªã—</span>`}
    </div>
  </div>

  <!-- Deviations -->
  <div class="card" style="margin-bottom:16px">
    <h3 style="margin-bottom:12px">é€¸è„±è©³ç´°</h3>
    ${s.deviations.length===0
      ? `<div style="color:#10b981;font-weight:700;padding:20px 0;text-align:center;font-size:15px">
           âœ“ &nbsp;é€¸è„±ãªã— â€” å®Œç’§ãªæ‰‹é †éµå®ˆ
         </div>`
      : s.deviations.map(d=>{
          const isCrit=d.severity==="critical";
          const bgCol=isCrit?"rgba(239,68,68,0.08)":"rgba(59,130,246,0.06)";
          const bdCol=isCrit?"rgba(239,68,68,0.3)":"rgba(59,130,246,0.2)";
          const typeLabel=d.type==="over_time"?"æ™‚é–“è¶…é (Over Time)"
            :d.type==="missing_step"?"æ‰‹é †çœç•¥ (Missing Step)"
            :d.type==="order_swap"?"æ‰‹é †å…¥æ›¿ (Order Swap)"
            :d.type==="step_deviation"?"å®Ÿæ–½é€¸è„± (Step Deviation)":d.type;
          const rangeInfo=d.gold_clip_range
            ?`<div style="font-size:11px;color:${isCrit?"#fca5a5":"#60a5fa"};margin-top:4px">
                Gold clips ${d.gold_clip_range[0]}â€“${d.gold_clip_range[1]}
                â†’ ç ”ä¿®ç”Ÿ clips ${d.trainee_clip_range[0]}â€“${d.trainee_clip_range[1]}
              </div>`:"";
          return `
          <div style="display:flex;gap:12px;align-items:flex-start;padding:14px;
            background:${bgCol};border:1px solid ${bdCol};
            border-radius:10px;margin-bottom:8px;
            ${isCrit?"box-shadow:0 0 0 1px rgba(239,68,68,0.15)":""}">
            <span class="pill pill-${d.severity}" style="flex-shrink:0">${d.severity}</span>
            <div style="flex:1">
              <div style="font-weight:700;font-size:13px;margin-bottom:5px;color:${isCrit?"#f87171":"var(--text)"}">
                ${typeLabel}
              </div>
              <div style="font-size:12px;color:var(--muted)">${d.detail}</div>
              ${rangeInfo}
            </div>
          </div>`;
        }).join("")}
  </div>

  <!-- DTW Matrix -->
  <div class="card">
    <h3 style="margin-bottom:5px">DTW æ•´åˆ—ãƒãƒˆãƒªã‚¯ã‚¹ (å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿)</h3>
    <p style="font-size:12px;color:var(--muted);margin-bottom:14px">
      ç¸¦è»¸: Goldã‚¯ãƒªãƒƒãƒ— / æ¨ªè»¸: ç ”ä¿®ç”Ÿã‚¯ãƒªãƒƒãƒ— /
      <span style="color:rgba(13,148,136,.9)">â” Goldå¢ƒç•Œ</span> /
      <span style="color:rgba(96,165,250,.9)">â” ç ”ä¿®ç”Ÿå¢ƒç•Œ</span> /
      <span style="color:rgba(13,148,136,.8)">â–  æ•´åˆ—ãƒ‘ã‚¹ï¼ˆå®Ÿæ¸¬ï¼‰</span>
    </p>
    <div id="dtwWrap"></div>
    <div style="margin-top:10px;font-size:12px;color:var(--muted)" id="dtwNote">
      æ•´åˆ—ãƒ‘ã‚¹ãŒå¯¾è§’ç·šã«è¿‘ã„ã»ã©ã€Goldæ‰‹é †ã¨ã®ä¸€è‡´åº¦ãŒé«˜ã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
      ã‚¹ã‚³ã‚¢100ã®ã€Œéšæ®µæ¸…æƒã€ã¯å¯¾è§’ç·šã»ã¼ä¸€è‡´ã€‚
    </div>
    ${s.sourceLabel?`<div style="margin-top:6px;font-size:11px;color:#475569">
      å‡ºå…¸: ${s.sourceLabel}
    </div>`:""}
  </div>`;
  // NG scenario: show collapse explanation
  if(s.isSynthesized){
    const noteEl=document.getElementById("dtwNote");
    if(noteEl) noteEl.innerHTML=`
      <span style="color:#f87171;font-weight:700">âš  é‡å¤§ãªåç¸®ã‚’æ¤œå‡ºï¼š</span>
      Gold 15ã‚¯ãƒªãƒƒãƒ—ã®ã†ã¡ 12ã‚¯ãƒªãƒƒãƒ— (clip 0â€“11) ãŒç ”ä¿®ç”Ÿã‚¯ãƒªãƒƒãƒ— 0 ã«é›†ä¸­æ•´åˆ—ã€‚
      ã“ã‚Œã¯å¤§éƒ¨åˆ†ã®æ‰‹é †ãŒçœç•¥ãƒ»æœªå®Ÿæ–½ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ‘ã‚¹ã®å·¦ç«¯ã¸ã®é›†ä¸­ãŒè¨¼æ‹ ã§ã™ã€‚`;
  }

  // Animate ring
  setTimeout(()=>{
    animCount(document.getElementById("ringNum"),0,s.score,1000,1);
    document.getElementById("ringArc").style.transition="stroke-dashoffset 1.1s cubic-bezier(.4,0,.2,1)";
    document.getElementById("ringArc").setAttribute("stroke-dashoffset",circ*(1-s.score/100));
  },50);

  // Animate timelines
  setTimeout(()=>{
    document.getElementById("tlGold").style.width="100%";
    document.getElementById("tlTrainee").style.width="100%";
  },200);

  // DTW
  document.getElementById("dtwWrap").appendChild(buildDTW(s));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// IMPACT BARS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function animImpact(){
  setTimeout(()=>{document.getElementById("imp1").style.width="50%";},100);
  setTimeout(()=>{document.getElementById("imp2").style.width="30%";},300);
  setTimeout(()=>{document.getElementById("imp3").style.width="90%";},500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function init(){
  initHero();
  buildTable();
  buildScenList();
  // showScenario needs DOM ready; start with score=100 (æœ€é«˜ã‚¹ã‚³ã‚¢)
  showScenario(SCENARIOS[5]);
  // Chart after one rAF to ensure layout is complete
  requestAnimationFrame(()=>requestAnimationFrame(buildScoreChart));

  document.querySelectorAll("section[id]").forEach(s=>io.observe(s));
}

document.addEventListener("DOMContentLoaded",init);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIVE SCORING WIDGET
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const LIVE_API = "http://localhost:8000";
let liveGoldVideos = [];
let liveSelectedFile = null;
let liveApiOnline = false;
let liveStoredResult = null;

// â”€â”€ Timeout-aware fetch (Safari/Edge compatible) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveFetch(url, opts = {}, timeoutMs = 4000) {
  const ctrl = new AbortController();
  const tid  = setTimeout(() => ctrl.abort(), timeoutMs);
  return fetch(url, { ...opts, signal: ctrl.signal }).finally(() => clearTimeout(tid));
}

// â”€â”€ API status check â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function liveCheckApi() {
  const dot   = document.getElementById("liveApiDot");
  const label = document.getElementById("liveApiLabel");
  const hint  = document.getElementById("liveApiHint");
  dot.className = "api-dot";
  label.textContent = "ç¢ºèªä¸­â€¦";
  try {
    const r = await liveFetch(LIVE_API + "/health", { cache: "no-cache" }, 3000);
    if (!r.ok) throw new Error("non-200");
    liveApiOnline = true;
    dot.className = "api-dot online";
    label.textContent = "API ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ (localhost:8000)";
    hint.textContent = "";
    document.getElementById("liveOfflineMsg").style.display = "none";
    document.getElementById("liveWidget").style.display = "block";
    await liveFetchGolds();
    liveFetchStats();
  } catch {
    liveApiOnline = false;
    dot.className = "api-dot offline";
    label.textContent = "API ã‚ªãƒ•ãƒ©ã‚¤ãƒ³";
    hint.textContent = "ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã‹ã‚‰ã€Œå†ç¢ºèªã€ã‚’æŠ¼ã—ã¦ãã ã•ã„";
    document.getElementById("liveOfflineMsg").style.display = "block";
    document.getElementById("liveWidget").style.display = "none";
    const stBar = document.getElementById("liveStatsBar");
    if (stBar) stBar.classList.remove("visible");
  }
}

// â”€â”€ Load gold videos into dropdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function liveFetchGolds() {
  try {
    const r = await fetch(LIVE_API + "/videos?is_gold=true&limit=50");
    const data = await r.json();
    liveGoldVideos = data.items || [];
    const sel = document.getElementById("liveGoldSelect");
    sel.innerHTML = '<option value="">â€” Gold å‹•ç”»ã‚’é¸æŠ â€”</option>';
    liveGoldVideos.forEach(v => {
      const opt = document.createElement("option");
      opt.value = v.video_id;
      opt.textContent = `Gold #${v.video_id}  (${v.clip_count} clips Â· ${v.task_id})`;
      sel.appendChild(opt);
    });
    sel.onchange = () => {
      const v = liveGoldVideos.find(x => x.video_id == sel.value);
      document.getElementById("liveGoldInfo").textContent =
        v ? `${v.clip_count} clips Â· ã‚¿ã‚¹ã‚¯: ${v.task_id} Â· ç™»éŒ²: ${(v.created_at||"").slice(0,10)}` : "";
      liveUpdateBtn();
    };
    // Auto-select first gold if only one task type
    if (liveGoldVideos.length === 1) {
      sel.value = liveGoldVideos[0].video_id;
      sel.dispatchEvent(new Event("change"));
    }
  } catch(e) {
    console.warn("liveFetchGolds error:", e);
  }
}

// â”€â”€ File drop / select â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveSetFile(file) {
  if (!file) return;
  liveSelectedFile = file;
  const sizeMB = (file.size / 1024 / 1024).toFixed(0);
  const sizeStr = sizeMB > 0 ? ` (${sizeMB} MB)` : "";
  const warnStr = file.size > 500 * 1024 * 1024
    ? " â€” âš ï¸ å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯å‡¦ç†ã«æ•°åˆ†ã‹ã‹ã‚Šã¾ã™" : "";
  document.getElementById("liveDropIcon").textContent = "âœ…";
  document.getElementById("liveDropLabel").textContent = "å‹•ç”»ãŒé¸æŠã•ã‚Œã¾ã—ãŸ";
  document.getElementById("liveDropFileName").textContent = file.name + sizeStr + warnStr;
  document.getElementById("liveDropZone").classList.add("has-file");
  liveUpdateBtn();
}
function liveOnFileSelect(input) { liveSetFile(input.files[0]); }

// drag-and-drop support
document.addEventListener("DOMContentLoaded", () => {
  const dz = document.getElementById("liveDropZone");
  if (!dz) return;
  dz.addEventListener("dragover", e => { e.preventDefault(); dz.classList.add("over"); });
  dz.addEventListener("dragleave", () => dz.classList.remove("over"));
  dz.addEventListener("drop", e => {
    e.preventDefault();
    dz.classList.remove("over");
    const file = e.dataTransfer.files[0];
    if (file) liveSetFile(file);
  });
});

// â”€â”€ Update score button state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveUpdateBtn() {
  const goldId = document.getElementById("liveGoldSelect").value;
  const btn    = document.getElementById("liveScoreBtn");
  const lbl    = document.getElementById("liveBtnLabel");
  if (!goldId && !liveSelectedFile) {
    btn.disabled = true; lbl.textContent = "Gold å‹•ç”»ã¨ç ”ä¿®ç”Ÿå‹•ç”»ã‚’é¸æŠã—ã¦ãã ã•ã„";
  } else if (!goldId) {
    btn.disabled = true; lbl.textContent = "Gold å‹•ç”»ã‚’é¸æŠã—ã¦ãã ã•ã„";
  } else if (!liveSelectedFile) {
    btn.disabled = true; lbl.textContent = "ç ”ä¿®ç”Ÿå‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„";
  } else {
    btn.disabled = false; lbl.textContent = "æ¡ç‚¹ã‚’é–‹å§‹ã™ã‚‹";
  }
}

// â”€â”€ Run full scoring flow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function liveRunScore() {
  const goldId = parseInt(document.getElementById("liveGoldSelect").value);
  if (!goldId || !liveSelectedFile) return;

  // disable UI
  document.getElementById("liveScoreBtn").disabled = true;
  document.getElementById("liveResult").classList.remove("visible");

  const prog      = document.getElementById("liveProgress");
  const progLabel = document.getElementById("liveProgLabel");
  const progBar   = document.getElementById("liveProgBar");
  prog.classList.add("visible");

  function setProgress(pct, text) {
    progBar.style.width = pct + "%";
    progLabel.textContent = text;
  }

  // Get task_id from the selected gold video
  const goldMeta = liveGoldVideos.find(x => x.video_id == goldId);
  const taskId   = goldMeta?.task_id || "filter_change";

  try {
    // Step 1: Upload trainee video (no timeout â€” large files can take time)
    const sizeMB = (liveSelectedFile.size / 1024 / 1024).toFixed(1);
    setProgress(10, `å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­â€¦ (${sizeMB} MB)`);
    const fd = new FormData();
    fd.append("file", liveSelectedFile);
    fd.append("task_id", taskId);
    const uploadResp = await fetch(LIVE_API + "/videos", { method: "POST", body: fd });
    if (!uploadResp.ok) {
      let errMsg = `HTTP ${uploadResp.status}`;
      try { const j = await uploadResp.json(); errMsg = j.detail || JSON.stringify(j); } catch {}
      throw new Error("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: " + errMsg.slice(0, 300));
    }
    const uploaded = await uploadResp.json();
    const traineeId = uploaded.video_id;
    setProgress(40, `å‹•ç”»ç™»éŒ²å®Œäº† (video_id=${traineeId}, ${uploaded.clip_count} clips)`);

    // Wait for video to finish processing if still in-progress
    let videoStatus = uploaded.status;
    let clipCount   = uploaded.clip_count;
    for (let i = 0; i < 90 && videoStatus === "processing"; i++) {
      await new Promise(r => setTimeout(r, 1000));
      const vr = await liveFetch(LIVE_API + `/videos/${traineeId}`, {}, 5000);
      const vd = await vr.json();
      videoStatus = vd.status;
      clipCount   = vd.clip_count || clipCount;
      setProgress(40 + Math.min(i * 0.3, 15), `ç‰¹å¾´é‡æŠ½å‡ºä¸­â€¦ (${clipCount} clips å®Œäº†)`);
    }
    if (videoStatus === "error") throw new Error("å‹•ç”»å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: MP4 / AVI / MOV / MKV");
    setProgress(60, "DTW æ•´åˆãƒ»æ¡ç‚¹ã‚’é–‹å§‹â€¦");

    // Step 2: Queue score job
    const scoreResp = await liveFetch(LIVE_API + "/score", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ gold_video_id: goldId, trainee_video_id: traineeId }),
    }, 8000);
    if (!scoreResp.ok) {
      let errMsg = `HTTP ${scoreResp.status}`;
      try { const j = await scoreResp.json(); errMsg = j.detail || JSON.stringify(j); } catch {}
      throw new Error("æ¡ç‚¹ã‚­ãƒ¥ãƒ¼ç™»éŒ²ã‚¨ãƒ©ãƒ¼: " + errMsg.slice(0, 200));
    }
    const job = await scoreResp.json();
    setProgress(70, `æ¡ç‚¹ã‚¸ãƒ§ãƒ– #${job.job_id} ã‚’å®Ÿè¡Œä¸­â€¦`);

    // Step 3: Poll for result (up to 3 minutes)
    let result = null;
    for (let i = 0; i < 180; i++) {
      await new Promise(r => setTimeout(r, 1000));
      const statusResp = await liveFetch(LIVE_API + `/score/${job.job_id}`, {}, 5000);
      const jobData = await statusResp.json();
      const pct = 70 + Math.min(i * 0.16, 27);
      const elapsedSec = i + 1;
      setProgress(pct, `æ¡ç‚¹ä¸­â€¦ ${elapsedSec}ç§’çµŒé (çŠ¶æ…‹: ${jobData.status})`);
      if (jobData.status === "completed" || jobData.status === "done") {
        result = jobData.result; break;
      }
      if (jobData.status === "error" || jobData.status === "failed") {
        throw new Error("æ¡ç‚¹ã‚¨ãƒ©ãƒ¼: " + (jobData.error || jobData.status));
      }
    }
    if (!result) throw new Error("ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ (3åˆ†) â€” ã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„");

    setProgress(100, "æ¡ç‚¹å®Œäº†ï¼");
    await new Promise(r => setTimeout(r, 400));
    prog.classList.remove("visible");
    liveShowResult(result);

  } catch(e) {
    prog.classList.remove("visible");
    liveShowError(e.message || String(e));
  }
}

// â”€â”€ Display result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveShowResult(res) {
  liveStoredResult = res;
  const summary = res.summary || {};
  const decision = summary.decision || "â€”";
  const score = res.score ?? 0;
  const metrics = res.metrics || {};
  const deviations = res.deviations || [];

  // Score color
  const col = decision === "pass" ? "var(--pass)"
            : decision === "fail" ? "var(--danger)"
            : "var(--warn)";
  document.getElementById("liveResultScore").textContent = score.toFixed(1);
  document.getElementById("liveResultScore").style.color = col;

  // Title + badges
  const decisionLabel = { pass:"åˆæ ¼ PASS", fail:"ä¸åˆæ ¼ FAIL", needs_review:"è¦ç¢ºèª", retrain:"å†ç ”ä¿®" };
  const pillClass = { pass:"pill-pass", fail:"pill-fail", needs_review:"pill-review", retrain:"pill-fail" };
  document.getElementById("liveResultTitle").textContent =
    `æ¡ç‚¹å®Œäº† â€” ${(res._meta?.source_video||liveSelectedFile?.name||"").split(/[/\\]/).pop()}`;

  const badges = document.getElementById("liveResultBadges");
  badges.innerHTML = `
    <span class="pill ${pillClass[decision]||"pill-quality"}">${decisionLabel[decision]||decision}</span>
    <span class="pill pill-quality" style="background:rgba(148,163,184,.1);color:var(--muted);border-color:var(--border)">
      Gold #${res.gold_video_id}
    </span>
  `;
  if (summary.severity_counts?.critical > 0) {
    badges.innerHTML += `<span class="pill pill-critical">é‡å¤§é€¸è„± ${summary.severity_counts.critical}ä»¶</span>`;
  }

  // Metrics strip
  const mDiv = document.getElementById("liveResultMetrics");
  const mItems = [
    ["è¦‹é€ƒã—", metrics.miss_steps ?? 0, metrics.miss_steps > 0 ? "var(--danger)" : "var(--pass)"],
    ["é †åºé•å", metrics.swap_steps ?? 0, metrics.swap_steps > 0 ? "var(--warn)" : "var(--pass)"],
    ["å“è³ªé€¸è„±", metrics.deviation_steps ?? 0, metrics.deviation_steps > 0 ? "var(--warn)" : "var(--pass)"],
    ["DTW ã‚³ã‚¹ãƒˆ", (metrics.dtw_normalized_cost ?? 0).toFixed(3), "var(--muted)"],
  ];
  mDiv.innerHTML = mItems.map(([label, val, color]) => `
    <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center">
      <div style="font-size:22px;font-weight:800;color:${color}">${val}</div>
      <div style="font-size:11px;color:var(--muted);margin-top:4px">${label}</div>
    </div>
  `).join("");

  // Deviations
  const devMap = { missing_step:"æ‰‹é †çœç•¥", step_deviation:"å“è³ªé€¸è„±", order_swap:"é †åºé•å", over_time:"è¶…éæ™‚é–“" };
  const devSev = { critical:"pill-critical", quality:"pill-quality", efficiency:"pill-efficiency" };
  const devDiv = document.getElementById("liveResultDeviations");
  if (deviations.length === 0) {
    devDiv.innerHTML = `<div style="color:var(--pass);font-weight:600;padding:12px 0">âœ“ é€¸è„±ãªã— â€” å®Œç’§ãªéµå®ˆã§ã™ï¼</div>`;
  } else {
    devDiv.innerHTML = `<div style="font-size:12px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin-bottom:10px">é€¸è„±è©³ç´°</div>`;
    devDiv.innerHTML += `<div class="live-dev-list">` + deviations.map((d, i) => `
      <div class="live-dev-item">
        <div class="live-dev-step">Step ${d.step_index ?? i}</div>
        <div class="live-dev-body">
          <div class="live-dev-type">
            ${devMap[d.type] || d.type}
            <span class="pill ${devSev[d.severity]||"pill-quality"}" style="margin-left:6px;font-size:10px">${d.severity||"quality"}</span>
          </div>
          ${d.detail ? `<div class="live-dev-detail">${d.detail}</div>` : ""}
          ${d.distance != null ? `<div class="live-dev-detail">è·é›¢ã‚¹ã‚³ã‚¢: ${d.distance.toFixed(3)}</div>` : ""}
        </div>
      </div>
    `).join("") + `</div>`;
  }

  const csvBtn = document.getElementById("liveCsvBtn");
  if (csvBtn) csvBtn.style.display = "inline-flex";
  document.getElementById("liveResult").classList.add("visible");
  document.getElementById("liveResult").scrollIntoView({ behavior: "smooth", block: "nearest" });
}

// â”€â”€ Display error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveShowError(msg) {
  const div = document.getElementById("liveResult");
  div.classList.add("visible");
  div.innerHTML = `
    <div style="text-align:center;padding:24px 0">
      <div style="font-size:36px;margin-bottom:12px">âŒ</div>
      <h3 style="color:var(--danger);margin-bottom:8px">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>
      <p style="font-size:13px;color:var(--muted);max-width:480px;margin:0 auto">${msg}</p>
      <button class="live-retry-btn" onclick="liveReset()" style="margin-top:16px">â† å†è©¦è¡Œã™ã‚‹</button>
    </div>
  `;
  div.scrollIntoView({ behavior: "smooth", block: "nearest" });
}

// â”€â”€ Reset widget â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveReset() {
  liveSelectedFile = null;
  document.getElementById("liveGoldSelect").value = "";
  document.getElementById("liveGoldInfo").textContent = "";
  document.getElementById("liveDropIcon").textContent = "ğŸ¥";
  document.getElementById("liveDropLabel").textContent = "ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ­ãƒƒãƒ—";
  document.getElementById("liveDropFileName").textContent = "";
  document.getElementById("liveDropZone").className = "drop-zone";
  document.getElementById("liveFileInput").value = "";
  document.getElementById("liveProgress").classList.remove("visible");
  document.getElementById("liveResult").classList.remove("visible");
  liveStoredResult = null;
  document.getElementById("liveResult").innerHTML = "";  // clear error html if set
  // restore result inner structure
  document.getElementById("liveResult").innerHTML = `
    <div class="live-result-header">
      <div class="live-score-big" id="liveResultScore" style="color:var(--accent)">â€”</div>
      <div class="live-result-meta">
        <h3 id="liveResultTitle">æ¡ç‚¹å®Œäº†</h3>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px" id="liveResultBadges"></div>
      </div>
    </div>
    <div id="liveResultMetrics" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:16px"></div>
    <div id="liveResultDeviations"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:16px">
      <button class="btn-csv" id="liveCsvBtn" style="display:none" onclick="liveExportCSV()">ğŸ“¥ CSV ã§ä¿å­˜</button>
      <button class="live-retry-btn" onclick="liveReset()">â† ã‚‚ã†ä¸€åº¦æ¡ç‚¹ã™ã‚‹</button>
    </div>
  `;
  document.getElementById("liveScoreBtn").disabled = true;
  document.getElementById("liveBtnLabel").textContent = "Gold å‹•ç”»ã¨ç ”ä¿®ç”Ÿå‹•ç”»ã‚’é¸æŠã—ã¦ãã ã•ã„";
  document.getElementById("liveBtnIcon").textContent = "â–¶";
}

// â”€â”€ Live stats fetch (updates stats bar when API is online) â”€â”€â”€â”€â”€â”€â”€â”€
async function liveFetchStats() {
  try {
    const [sumResp, jobsResp] = await Promise.all([
      liveFetch(LIVE_API + "/dataset/summary", {}, 5000),
      liveFetch(LIVE_API + "/score?limit=500", {}, 5000),
    ]);
    const sum   = await sumResp.json().catch(() => ({}));
    const jobs  = await jobsResp.json().catch(() => ({}));
    const bar   = document.getElementById("liveStatsBar");
    if (!bar) return;
    bar.classList.add("visible");
    const el = id => document.getElementById(id);
    if (el("lstGold"))    el("lstGold").textContent    = sum.gold_videos    ?? "â€”";
    if (el("lstTrainee")) el("lstTrainee").textContent  = sum.trainee_videos ?? "â€”";
    const total    = jobs.total ?? 0;
    if (el("lstJobs"))    el("lstJobs").textContent     = total;
    const items    = jobs.items || [];
    const completed = items.filter(j => j.status === "completed");
    const passed    = completed.filter(j => j.decision === "pass");
    if (el("lstPass")) {
      el("lstPass").textContent = completed.length > 0
        ? Math.round(passed.length / completed.length * 100) + "%"
        : "â€”";
    }
  } catch(e) {
    console.warn("liveFetchStats:", e);
  }
}

// â”€â”€ CSV export of latest live score result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function liveExportCSV() {
  if (!liveStoredResult) return;
  const r   = liveStoredResult;
  const sum = r.summary  || {};
  const m   = r.metrics  || {};
  const devs = r.deviations || [];
  const ts  = new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-");

  let csv = "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰,å€¤\n";
  csv += `æ¡ç‚¹æ—¥æ™‚,${ts}\n`;
  csv += `ã‚¹ã‚³ã‚¢,${r.score}\n`;
  csv += `åˆ¤å®š,${sum.decision || ""}\n`;
  csv += `åˆ¤å®šç†ç”±,"${(sum.decision_reason || "").replace(/"/g,"'")}"\n`;
  csv += `Goldå‹•ç”»ID,${r.gold_video_id ?? ""}\n`;
  csv += `ç ”ä¿®ç”Ÿå‹•ç”»ID,${r.trainee_video_id ?? ""}\n`;
  csv += `ã‚¿ã‚¹ã‚¯ID,${r.task_id ?? ""}\n`;
  csv += `æ‰‹é †éºæ¼æ•°,${m.miss_steps ?? 0}\n`;
  csv += `æ‰‹é †å…¥æ›¿æ•°,${m.swap_steps ?? 0}\n`;
  csv += `å“è³ªé€¸è„±æ•°,${m.deviation_steps ?? 0}\n`;
  csv += `æ™‚é–“è¶…éç‡,${m.over_time_ratio ?? 0}\n`;
  csv += `DTWæ­£è¦åŒ–ã‚³ã‚¹ãƒˆ,${m.dtw_normalized_cost ?? ""}\n`;
  csv += `Criticalä»¶æ•°,${sum.severity_counts?.critical ?? 0}\n`;
  csv += `Qualityä»¶æ•°,${sum.severity_counts?.quality ?? 0}\n`;
  csv += `Efficiencyä»¶æ•°,${sum.severity_counts?.efficiency ?? 0}\n`;
  if (devs.length > 0) {
    csv += "\né€¸è„±ç•ªå·,ã‚¿ã‚¤ãƒ—,é‡å¤§åº¦,è©³ç´°,Goldé–‹å§‹ç§’,Goldçµ‚äº†ç§’,ç ”ä¿®ç”Ÿé–‹å§‹ç§’,ç ”ä¿®ç”Ÿçµ‚äº†ç§’\n";
    devs.forEach((d, i) => {
      const gt = d.gold_timecode    || [];
      const tt = d.trainee_timecode || [];
      const detail = (d.detail || "").replace(/"/g, "'");
      csv += `${i+1},${d.type||""},${d.severity||""},"${detail}",${gt[0]??""},${gt[1]??""},${tt[0]??""},${tt[1]??""}\n`;
    });
  }
  const bom  = "\uFEFF";
  const blob = new Blob([bom + csv], { type: "text/csv;charset=utf-8;" });
  const a    = document.createElement("a");
  a.href     = URL.createObjectURL(blob);
  a.download = `sopilot_score_${ts}.csv`;
  a.click();
  URL.revokeObjectURL(a.href);
}

// â”€â”€ Auto-check on page load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener("DOMContentLoaded", () => {
  // Initial check (silent)
  liveCheckApi();
  // Re-check every 10s if offline
  setInterval(() => { if (!liveApiOnline) liveCheckApi(); }, 10000);
});
</script>
</body>
</html>
